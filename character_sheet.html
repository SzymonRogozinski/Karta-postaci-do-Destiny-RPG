<!--Parametr obsługujący strony-->
<input type="hidden" class="sheet-tabstoggle" name="attr_sheetTab" value="main" />
<div class="sheet_selector">
    <button type="action" name="act_main">Główna strona</button>
    <button type="action" name="act_equipment">Ekwipunek</button>
    <button type="action" name="act_details">Szczegóły</button>
</div>
<!--Strona główna-->
<div class='sheet-main'>
    <!--Pierwsza kolumna-->
    <div class="sheet-col">
        <!--Postać po krótce-->
        <div id="General_description" class="sector">
            <div class="sub_sector">
                Imię: <input class="input_long" type="text" name="attr_name">

                Płeć:<select class="short_select" name="attr_gender">
                    <option value="-">-</option>
                    <option value="K">K</option>
                    <option value="M">M</option>
                </select>
            </div>

            <div class="sub_sector">
                Rasa:<select class="text_select" name="attr_race">
                    <option value="-">-</option>
                    <option value="Człowiek">Człowiek</option>
                    <option value="Exo">Exo</option>
                    <option value="Przebudzony">Przebudzony</option>
                </select><br>
            </div>

            <div class="sub_sector">
                Klasa:<select class="text_select" name="attr_class">
                    <option value="-">-</option>
                    <option value="Tytan">Tytan</option>
                    <option value="Łowca">Łowca</option>
                    <option value="Czarownik">Czarownik</option>
                </select><br>
            </div>

            <div class="sub_sector">
                Podklasa:<select class="text_select" id="subclass_list" name="attr_subclass">
                    <option value="-">-</option>
                    <option disabled style="background-color: black; color: white; font-weight: bold;">---Tytan---
                    </option>
                    <option value="Słoneczny pogromca">Słoneczny pogromca</option>
                    <option value="Szturmowiec">Szturmowiec</option>
                    <option value="Wartownik">Wartownik</option>
                    <option disabled style="background-color: black; color: white; font-weight: bold;">---Łowca---
                    </option>
                    <option value="Strzelec">Strzelec</option>
                    <option value="Gromodzierżca">Gromodzierżca</option>
                    <option value="Tropiciel">Tropiciel</option>
                    <option disabled style="background-color: black; color: white; font-weight: bold;">---Czarownik---
                    </option>
                    <option value="Ostrze świtu">Ostrze świtu</option>
                    <option value="Kroczący przez próżnię">Kroczący przez próżnię</option>
                    <option value="Siewca burz">Siewca burz</option>
                </select><br>
            </div>

            <div class="sub_sector">
                Ranga:<input class="input_long" type="text" name="attr_rank" value="-" readonly><br>
            </div>

            <div class="sub_sector">
                Poziom:<input class="input_short" type="text" name="attr_level" value="0" readonly><br>

                PD:<input class="input_short" type="text" name="attr_EXP_To_Next_Level" value="0" readonly><br>
            </div>
        </div>

        <div id="Skills" class="sector">
            <h3>Umiejętności</h3>

            <h6>Spryt</h6>
            <div class="sub_sector">
                Hazard [Spryt]<select class="short_select" name="attr_gamble" value="-">
                    <option value="-">-</option>
                    <option value="d4">k4</option>
                    <option value="d6">k6</option>
                    <option value="d8">k8</option>
                    <option value="d10">k10</option>
                    <option value="d12">k12</option>
                </select>
                <input type="hidden" name="attr_gamble_mod" value="0">
                <button type="action" class="roll_button" name="act_roll_gamble"></button><br>
            </div>
            <div class="sub_sector">
                Przetrwanie [Spryt]<select class="short_select" name="attr_survival" value="-">
                    <option value="-">-</option>
                    <option value="d4">k4</option>
                    <option value="d6">k6</option>
                    <option value="d8">k8</option>
                    <option value="d10">k10</option>
                    <option value="d12">k12</option>
                </select>
                <input type="hidden" name="attr_survival_mod" value="0">
                <button type="action" class="roll_button" name="act_roll_survival"></button><br>
            </div>
            <div class="sub_sector">
                Reperowanie [Spryt]<select class="short_select" name="attr_repair" value="-">
                    <option value="-">-</option>
                    <option value="d4">k4</option>
                    <option value="d6">k6</option>
                    <option value="d8">k8</option>
                    <option value="d10">k10</option>
                    <option value="d12">k12</option>
                </select>
                <input type="hidden" name="attr_repair_mod" value="0">
                <button type="action" class="roll_button" name="act_roll_repair"></button><br>
            </div>
            <div class="sub_sector">
                Spostrzegawczość [Spryt]<select class="short_select" name="attr_spot" value="-">
                    <option value="-">-</option>
                    <option value="d4">k4</option>
                    <option value="d6">k6</option>
                    <option value="d8">k8</option>
                    <option value="d10">k10</option>
                    <option value="d12">k12</option>
                </select>
                <input type="hidden" name="attr_spot_mod" value="0">
                <button type="action" class="roll_button" name="act_roll_spot"></button><br>
            </div>
            <div class="sub_sector">
                Tropienie [Spryt]<select class="short_select" name="attr_tracking" value="-">
                    <option value="-">-</option>
                    <option value="d4">k4</option>
                    <option value="d6">k6</option>
                    <option value="d8">k8</option>
                    <option value="d10">k10</option>
                    <option value="d12">k12</option>
                </select>
                <input type="hidden" name="attr_tracking_mod" value="0">
                <button type="action" class="roll_button" name="act_roll_tracking"></button><br>
            </div>
            <div class="sub_sector">
                Wyszukiwanie [Spryt]<select class="short_select" name="attr_search" value="-">
                    <option value="-">-</option>
                    <option value="d4">k4</option>
                    <option value="d6">k6</option>
                    <option value="d8">k8</option>
                    <option value="d10">k10</option>
                    <option value="d12">k12</option>
                </select>
                <input type="hidden" name="attr_search_mod" value="0">
                <button type="action" class="roll_button" name="act_roll_search"></button><br>
            </div>
            <div class="sub_sector">
                Wyśmiewanie [Spryt]<select class="short_select" name="attr_ridicule" value="-">
                    <option value="-">-</option>
                    <option value="d4">k4</option>
                    <option value="d6">k6</option>
                    <option value="d8">k8</option>
                    <option value="d10">k10</option>
                    <option value="d12">k12</option>
                </select>
                <input type="hidden" name="attr_ridicule_mod" value="0">
                <button type="action" class="roll_button" name="act_roll_ridicule"></button><br>
            </div>
            <h6>Zręczność</h6>
            <div class="sub_sector">
                Pilotowanie [Zręczność]<select class="short_select" name="attr_pilotage" value="-">
                    <option value="-">-</option>
                    <option value="d4">k4</option>
                    <option value="d6">k6</option>
                    <option value="d8">k8</option>
                    <option value="d10">k10</option>
                    <option value="d12">k12</option>
                </select>
                <input type="hidden" name="attr_pilotage_mod" value="0">
                <button type="action" class="roll_button" name="act_roll_pilotage"></button><br>
            </div>
            <div class="sub_sector">
                Prowadzenie [Zręczność]<select class="short_select" name="attr_drive" value="-">
                    <option value="-">-</option>
                    <option value="d4">k4</option>
                    <option value="d6">k6</option>
                    <option value="d8">k8</option>
                    <option value="d10">k10</option>
                    <option value="d12">k12</option>
                </select>
                <input type="hidden" name="attr_drive_mod" value="0">
                <button type="action" class="roll_button" name="act_roll_drive"></button><br>
            </div>
            <div class="sub_sector">
                Ruch [Zręczność]<select class="short_select" name="attr_move" value="d4">
                    <option value="d4">k4</option>
                    <option value="d6">k6</option>
                    <option value="d8">k8</option>
                    <option value="d10">k10</option>
                    <option value="d12">k12</option>
                </select>
                <input type="hidden" name="attr_move_mod" value="0">
                <button type="action" class="roll_button" name="act_roll_move"></button><br>
            </div>
            <div class="sub_sector">
                Rzucanie [Zręczność]<select class="short_select" name="attr_throw" value="-">
                    <option value="-">-</option>
                    <option value="d4">k4</option>
                    <option value="d6">k6</option>
                    <option value="d8">k8</option>
                    <option value="d10">k10</option>
                    <option value="d12">k12</option>
                </select>
                <input type="hidden" name="attr_throw_mod" value="0">
                <button type="action" class="roll_button" name="act_roll_throw"></button><br>
            </div>
            <div class="sub_sector">
                Skradanie się [Zręczność]<select class="short_select" name="attr_stealth" value="-">
                    <option value="-">-</option>
                    <option value="d4">k4</option>
                    <option value="d6">k6</option>
                    <option value="d8">k8</option>
                    <option value="d10">k10</option>
                    <option value="d12">k12</option>
                </select>
                <input type="hidden" name="attr_stealth_mod" value="0">
                <button type="action" class="roll_button" name="act_roll_stealth"></button><br>
            </div>
            <div class="sub_sector">
                Strzelanie [Zręczność]<select class="short_select" name="attr_shoot" value="d4">
                    <option value="d4">k4</option>
                    <option value="d6">k6</option>
                    <option value="d8">k8</option>
                    <option value="d10">k10</option>
                    <option value="d12">k12</option>
                </select>
                <input type="hidden" name="attr_shoot_mod" value="0">
                <button type="action" class="roll_button" name="act_roll_shoot"></button><br>
            </div>
            <div class="sub_sector">
                Walka wręcz [Zręczność]<select class="short_select" name="attr_brawl" value="d4">
                    <option value="d4">k4</option>
                    <option value="d6">k6</option>
                    <option value="d8">k8</option>
                    <option value="d10">k10</option>
                    <option value="d12">k12</option>
                </select>
                <input type="hidden" name="attr_brawl_mod" value="0">
                <button type="action" class="roll_button" name="act_roll_brawl"></button><br>
            </div>
            <div class="sub_sector">
                Włamywanie się [Zręczność]<select class="short_select" name="attr_breaking" value="-">
                    <option value="-">-</option>
                    <option value="d4">k4</option>
                    <option value="d6">k6</option>
                    <option value="d8">k8</option>
                    <option value="d10">k10</option>
                    <option value="d12">k12</option>
                </select>
                <input type="hidden" name="attr_breaking_mod" value="0">
                <button type="action" class="roll_button" name="act_roll_breaking"></button><br>
            </div>
            <h6>Duch</h6>
            <div class="sub_sector">
                Przekonywanie [Duch]<select class="short_select" name="attr_persuade" value="-">
                    <option value="-">-</option>
                    <option value="d4">k4</option>
                    <option value="d6">k6</option>
                    <option value="d8">k8</option>
                    <option value="d10">k10</option>
                    <option value="d12">k12</option>
                </select>
                <input type="hidden" name="attr_persuade_mod" value="0">
                <button type="action" class="roll_button" name="act_roll_persuade"></button><br>
            </div>
            <div class="sub_sector">
                Zastraszanie [Duch]<select class="short_select" name="attr_intimidate" value="-">
                    <option value="-">-</option>
                    <option value="d4">k4</option>
                    <option value="d6">k6</option>
                    <option value="d8">k8</option>
                    <option value="d10">k10</option>
                    <option value="d12">k12</option>
                </select>
                <input type="hidden" name="attr_intimidate_mod" value="0">
                <button type="action" class="roll_button" name="act_roll_intimidate"></button><br>
            </div>

            <h6>Dodatkowe</h6>
            <div class="sub_sector">
                <div>
                    <fieldset class="repeating_newskill">
                        <input class="input_long" type="text" name="attr_nsname">
                        <select class="short_select" name="attr_nsvalue" value="-">
                            <option value="-">-</option>
                            <option value="d4">k4</option>
                            <option value="d6">k6</option>
                            <option value="d8">k8</option>
                            <option value="d10">k10</option>
                            <option value="d12">k12</option>
                        </select>
                        <input type="hidden" name="attr_nsvaluemod" value="0">
                        <button type="action" class="roll_button" name="act_rollns"></button>
                    </fieldset>
                </div>
            </div>
        </div>
    </div><!--Druga kolumna-->
    <div class="sheet-col">
        <!--Cechy postaci-->
        <div id="Atributes" class="sector">
            <h3>Cechy</h3>
            <div class="sub_sector">
                Siła<select class="short_select" name="attr_strength" value="d4">
                    <option value="d4">k4</option>
                    <option value="d6">k6</option>
                    <option value="d8">k8</option>
                    <option value="d10">k10</option>
                    <option value="d12">k12</option>
                </select>
                <input type="hidden" name="attr_strength_mod" value="0">
                <button type="action" class="roll_button" name="act_roll_strength"></button><br>

                Zręczność<select class="short_select" name="attr_agility" value="d4">
                    <option value="d4">k4</option>
                    <option value="d6">k6</option>
                    <option value="d8">k8</option>
                    <option value="d10">k10</option>
                    <option value="d12">k12</option>
                </select>
                <input type="hidden" name="attr_agility_mod" value="0">
                <button type="action" class="roll_button" name="act_roll_agility"></button><br>
            </div>
            <div class="sub_sector">
                Spryt<select class="short_select" name="attr_smart" value="d4">
                    <option value="d4">k4</option>
                    <option value="d6">k6</option>
                    <option value="d8">k8</option>
                    <option value="d10">k10</option>
                    <option value="d12">k12</option>
                </select>
                <input type="hidden" name="attr_smart_mod" value="0">
                <button type="action" class="roll_button" name="act_roll_smart"></button><br>

                Duch<select class="short_select" name="attr_spirit" value="d4">
                    <option value="d4">k4</option>
                    <option value="d6">k6</option>
                    <option value="d8">k8</option>
                    <option value="d10">k10</option>
                    <option value="d12">k12</option>
                </select>
                <input type="hidden" name="attr_spirit_mod" value="0">
                <button type="action" class="roll_button" name="act_roll_spirit"></button><br>
            </div>
            <div class="vig_sub_sector">
                Wigor<select class="vig_select" name="attr_vigor" value="d4">
                    <option value="d4">k4</option>
                    <option value="d6">k6</option>
                    <option value="d8">k8</option>
                    <option value="d10">k10</option>
                    <option value="d12">k12</option>
                </select>
                <input type="hidden" class="roll_button" name="attr_vigor_mod" value="0">
                <button type="action" class="roll_button" name="act_roll_vigor"></button><br>
            </div>
            <!--Cechy pochodne-->
            <div class="sub_sector">
                Obrona:<input class="input_short" type="text" name="attr_parry" value="2" readonly><br>
                <input type="hidden" name="attr_parry_mod" value="0">

                Wytrzymałość:<input class="input_short" type="text" name="attr_tough" value="2" readonly><br>
                <input type="hidden" name="attr_tough_mod" value="0">
            </div>
            <div class="sub_sector">
                Charyzma:<input class="input_short" type="text" name="attr_charisma" value="0" readonly><br>

                Tempo:<input class="input_short" type="text" name="attr_speed" value="6" readonly><br>
            </div>
            <div class="sub_sector">
                Fuksy:<input type="number" name="attr_luck" value="3"><br>
                <input type="hidden" name="attr_luck_max" value="3">

                Rozmiar:<input class="input_short" type="text" name="attr_size" value="0" readonly><br>
            </div>
        </div>

        <!--Przewagi-->
        <div id="Advances" class="sector">
            <h3>Przewagi</h3>
            <div class="sub_sector">
                <div>
                    <fieldset class="repeating_advantage">
                        Nazwa<input type="text" name="attr_advname"><br>
                        Wymagania<input type="text" name="attr_advreq"><br>
                        <details>
                            Opis<br><textarea class="extending_desc" name="attr_advdiscDetails"></textarea>
                        </details>
                    </fieldset>
                </div>
            </div>
        </div>

        <!--Zawady-->
        <div id="Edges" class="sector">
            <h3>Zawady</h3>
            <div class="sub_sector">
                <div>
                    <fieldset class="repeating_edges">
                        Nazwa<input type="text" name="attr_edgname"><br>
                        Stopień<input type="text" name="attr_edgstr"><br>
                        <details>
                            Opis<br><textarea name="attr_edgDetails"></textarea>
                        </details>
                    </fieldset>
                </div>
            </div>
        </div>
    </div><!--Trzecia kolumna-->
    <div class='sheet-col'>
        <div id="resource" class="sector">
            <h3>Zasoby:</h3>
            <div class="sub_sector">
                Punkty światła<input type="number" name="attr_light_point" min="0" max="10" value="0" /><br>
            </div>
            <h4>Amunicja</h4>
            <div class="sub_sector">
                <p style="color:#aeaeae;" id="amno_k"><b>Kinetyczna</b></p><input type="number" name="attr_kinetic_amno"
                    min="0" max="10" value="0" /><br>
            </div>
            <div class="sub_sector">
                <p style="color:#3bff4f;" id="amno_s"><b>Specjalna</b></p><input type="number" name="attr_special_amno"
                    min="0" max="10" value="0" /><br>
            </div>
            <div class="sub_sector">
                <p style="color:#b300ff;" id="amno_h"><b>Ciężka</b></p><input type="number" name="attr_heavy_amno"
                    min="0" max="5" value="0" /><br>
            </div>
        </div>
        <div id="gun_shortcut" class="sector">
            <h3>Bronie</h3>
            <!--Bron kinetyczna-->
            <div class="sub_sector" id="kinetic_shortcut">
                <input class="gun_name" name="attr_kinetic_weapon_name" readonly>
                <input class="gun_status" name="attr_kinetic_weapon_amno_status" readonly>
                <button class="reload_button" type="action" name="act_reload_kinetic"></button>
                <button class="atack_button" type="action" name="act_attack_kinetic"></button>
            </div>
            <!--Bron specjalna-->
            <div class="sub_sector" id="special_shortcut">
                <input class="gun_name" name="attr_special_weapon_name" readonly>
                <input class="gun_status" name="attr_special_weapon_amno_status" readonly>
                <button class="reload_button" type="action" name="act_reload_special"></button>
                <button class="atack_button" type="action" name="act_attack_special"></button>
            </div>
            <!--Bron ciężka-->
            <div class="sub_sector" id="heavy_shortcut">
                <input class="gun_name" name="attr_heavy_weapon_name" readonly>
                <input class="gun_status" name="attr_heavy_weapon_amno_status" readonly>
                <button class="reload_button" type="action" name="act_reload_heavy"></button>
                <button class="atack_button" type="action" name="act_attack_heavy"></button>
            </div>
            <!--Walka wręcz-->
            <div class="sub_sector" id="melee_shortcut">
                <input class="gun_name" name="attr_melee_name" value="Walka wręcz" readonly>
                <input type="hidden" name="attr_melee_damage" value="d4">
                <button class="atack_button" type="action" name="act_attack_melee"></button>
            </div>
        </div>
        <div id="armor_sec" class="sector">
            <h3>Pancerz</h3>
            <div class="sub_sector">
                Głowa<input name="attr_head_armor_value" readonly>
            </div>
            <div class="sub_sector">
                Ręce<input name="attr_hands_armor_value" readonly>
            </div>
            <div class="sub_sector">
                Korpus<input name="attr_body_armor_value" readonly>
            </div>
            <div class="sub_sector">
                Nogi<input name="attr_legs_armor_value" readonly>
            </div>
        </div>
        <div id="health" class="sector">
            <input class="sheet-max-barrier-switch" type="hidden" name="attr_max_barrier" value="5">
            <div class="sub_sector">
                <h3>Zdrowie</h3>
                <input type="hidden" name="attr_actual_health">
                <input type="checkbox" name="attr_health_death" class="death">
                <input type="checkbox" name="attr_health_wound" class="wound">
                <input type="checkbox" name="attr_health_shock" class="shock">
                <input type="checkbox" name="attr_health_barrier1" class="barrier1">
                <input type="checkbox" name="attr_health_barrier2" class="barrier2">
                <input type="checkbox" name="attr_health_barrier3" class="barrier3">
                <input type="checkbox" name="attr_health_barrier4" class="barrier4">
                <input type="checkbox" name="attr_health_barrier5" class="barrier5">
                <input type="checkbox" name="attr_health_barrier6" class="barrier6">
            </div>
            <div class="sub_sector">
                <h3>Regeneracja</h3>
                <input class="text" name="attr_armor_regeneration_dice" readonly>
                <button type="action" class="roll_button" name="act_roll_regeneration"></button><br>
            </div>
            <div class="sub_sector">
                <h3>Wyjście z szoku</h3>
                <button type="action" class="roll_button" name="act_roll_unshock" value="wyjście z szoku"></button><br>
            </div>
        </div>
    </div>
</div>
<!--Strona ekwipunku-->
<div class="sheet-equipment">
    <!--Engramy-->
    <div class="sector">
        <h3>Engramy</h3>
        <div class="engram_list">
            <div class="sub_sector">
                <input class="sheet-engram-switch" type="hidden" name="attr_engram1" value="null">
                <div class="image_div">
                    <img class="icon-engram">
                </div>
            </div>
            <div class="sub_sector">
                <input class="sheet-engram-switch" type="hidden" name="attr_engram2" value="null">
                <div class="image_div">
                    <img class="icon-engram">
                </div>
            </div>
            <div class="sub_sector">
                <input class="sheet-engram-switch" type="hidden" name="attr_engram3" value="null">
                <div class="image_div">
                    <img class="icon-engram">
                </div>
            </div>
            <div class="sub_sector">
                <input class="sheet-engram-switch" type="hidden" name="attr_engram4" value="null">
                <div class="image_div">
                    <img class="icon-engram">
                </div>
            </div>
            <div class="sub_sector">
                <input class="sheet-engram-switch" type="hidden" name="attr_engram5" value="null">
                <div class="image_div">
                    <img class="icon-engram">
                </div>
            </div>
            <div class="sub_sector">
                <input class="sheet-engram-switch" type="hidden" name="attr_engram6" value="null">
                <div class="image_div">
                    <img class="icon-engram">
                </div>
            </div>
            <div class="sub_sector">
                <input class="sheet-engram-switch" type="hidden" name="attr_engram7" value="null">
                <div class="image_div">
                    <img class="icon-engram">
                </div>
            </div>
            <div class="sub_sector">
                <input class="sheet-engram-switch" type="hidden" name="attr_engram8" value="null">
                <div class="image_div">
                    <img class="icon-engram">
                </div>
            </div>
            <div class="sub_sector">
                <input class="sheet-engram-switch" type="hidden" name="attr_engram9" value="null">
                <div class="image_div">
                    <img class="icon-engram">
                </div>
            </div>
            <div class="sub_sector">
                <input class="sheet-engram-switch" type="hidden" name="attr_engram10" value="null">
                <div class="image_div">
                    <img class="icon-engram">
                </div>
            </div>
            <div class="sub_sector">
                <button type="action" name="act_add_engram">Dodaj</button>
                <button type="action" name="act_delete_engram">Usuń</button>
            </div>
        </div>
    </div>
    <!--Ekwipunek ogólny-->
    <div class="sector">
        <h3>Ekwipunek</h3>
        <textarea class="big_textfield" name="attr_general_eq"></textarea>
    </div>
    <!--Waluty-->
    <div class="sector">
        <h3>Waluty</h3>
        <div class="sub_sector">
            Migot <input class="long_number" type="number" name="attr_glimmer" min="0" max="100000000"><br>
        </div>
        <div class="sub_sector">
            Legendarne odłamki <input class="short_number" type="number" name="attr_legendary_shards" min="0"
                max="100"><br>
        </div>
        <div class="sub_sector">
            Dziwne monety <input class="short_number" type="number" name="attr_strange_coins" min="0" max="100">
        </div>
    </div>
    <!--Karty ekwipunku-->
    <div class="sector" id="cards">
        <!--Karty zaekwipowane Strona lewa-->
        <div class="sector" id="In_hand">
            <h3>Broń kinetyczna</h3>
            <!--Karta broni-->
            <div class="sub_sector">
                <!--Wyciągnięcie zmiennej, aby mogła zmieniać tło-->
                <input name="attr_kinetic_weapon_quality" type="hidden" class="sheet-weapon-quality-switch">
                <div class="sheet-weapon-card">
                    <div class="left_part">
                        <!--Nazwa-->
                        <div class="param">
                            <input class="param_long" type="text" name="attr_kinetic_weapon_name" value="">
                        </div>
                        <div class="param">
                            <!--Typ broni-->
                            <select class="select_long" name="attr_kinetic_type" value="-">
                                <option value="">-</option>

                                <option disabled style="background-color: black; color: white; font-weight: bold;">
                                    ---Broń
                                    zwykła---</option>
                                <option value="Hand_cannon">Rewolwer</option>
                                <option value="Auto_rifle">Karabin automatyczny</option>
                                <option value="Scout_rifle">Karabin zwiadowczy</option>
                                <option value="Pulse_rifle">Karabin pulsacyjny</option>
                                <option value="Sidearm">Broń boczna</option>
                                <option value="Smg">Pistolet maszynowy</option>
                                <option value="Bow">Łuk</option>

                                <option disabled style="background-color: black; color: white; font-weight: bold;">
                                    ---Broń
                                    specjalna---</option>
                                <option value="Shotgun">Strzelba</option>
                                <option value="Sniper_rifle">Karabin snajperski</option>
                                <option value="Fusion_rifle">Karabin fuzyjny</option>
                                <option value="Light_grnd">Lekki Granatnik</option>

                                <option disabled style="background-color: black; color: white; font-weight: bold;">
                                    ---Broń
                                    ciężka---</option>
                                <option value="Machine_rifle">Karabin maszynowy</option>
                                <option value="Line_rifle">Karabin liniowy</option>
                                <option value="Rocket_launcher">Wyrzutnia rakiet</option>
                                <option value="Granade_launcher">Granatnik</option>
                                <option value="Sword">Miecz</option>
                            </select>
                        </div>
                        <!--Parametry broni-->
                        <div class="param">
                            <input class="readonly_input" type="text" name="attr_kinetic_param_name_1" readonly>
                            <input class="param" type="text" name="attr_kinetic_param1">
                        </div>
                        <div class="param">
                            <input class="readonly_input" type="text" name="attr_kinetic_param_name_2" readonly>
                            <input class="param" type="text" name="attr_kinetic_param2">
                        </div>
                        <div class="param">
                            <input class="readonly_input" type="text" name="attr_kinetic_param_name_3" readonly>
                            <input class="param" type="text" name="attr_kinetic_param3">
                        </div>
                        <div class="param">
                            <input class="readonly_input" type="text" name="attr_kinetic_param_name_4" readonly>
                            <input class="param" type="text" name="attr_kinetic_param4">
                        </div>
                        <div class="param">
                            <input class="readonly_input" type="text" name="attr_kinetic_param_name_5" readonly>
                            <input class="param" type="text" name="attr_kinetic_param5">
                        </div>
                        <div class="param">
                            <input class="readonly_input" type="text" name="attr_kinetic_param_name_6" readonly>
                            <input class="param" type="text" name="attr_kinetic_param6">
                        </div>
                        <div class="param">
                            <input class="readonly_input" type="text" name="attr_kinetic_param_name_7" readonly>
                            <input class="param" type="text" name="attr_kinetic_param7">
                        </div>
                        <div class="param">
                            <input class="readonly_input" type="text" value="Strzały" readonly>
                            <input class="param" type="number" name="attr_kinetic_weapon_current_ammo" min="0" readonly>
                        </div>
                        <!--Wybór typu amunicji-->
                        <div class="param">
                            <input class="readonly_input" type="text" value="Amunicja" readonly>
                            <input class="readonly_amno_kinetic" type="text" value="Kinetyczna" readonly>
                            <input type="hidden" name="attr_kinetic_weapon_amno" value="kinetic_amno">
                        </div>
                        <!--Wybór jakości-->
                        <div class="param">
                            <input class="readonly_input" type="text" value="Rzadkość" readonly>
                            <select class="sheet-quality-select" name="attr_kinetic_weapon_quality" value="-">
                                <option value="-">-</option>
                                <option value="common">Zwykła</option>
                                <option value="uncommon">Niezwykła</option>
                                <option value="rare">Rzadka</option>
                                <option value="legend">Legendarna</option>
                                <option value="exotic">Egzotyczna</option>
                            </select>
                        </div>
                    </div>
                    <!--Wybór typu obrażeń-->
                    <div class="right_part">
                        <!--Wyciągnięcie zmiennej, aby mogła zmieniać grafikę żywiołu-->
                        <input name="attr_kinetic_weapon_energy" type="hidden" class="sheet-energy-switch">
                        <div class="param">
                            <input class="readonly_input" type="text" value="Żywioł" readonly>
                            <select class="select_param" name="attr_kinetic_weapon_energy">
                                <option value="">-</option>
                                <option value="kinetic">Kinetyczny</option>
                                <option value="arc">Arc</option>
                                <option value="void">Próżniowy</option>
                                <option value="solar">Solarny</option>
                            </select>
                        </div>
                        <!--Polę na grafikę żywiołu-->
                        <div class="image_div">
                            <img class="icon-energy">
                        </div>
                        <!--Wyciągnięcie zmiennej, aby mogła wyświetlać odpowiednią liczbę modyfikacji-->
                        <input name="attr_kinetic_weapon_quality" type="hidden" class="sheet-block-mod-switch">
                        <!--Modyfikacja broni jeden-->
                        <div class="block_mod_1">
                            <input class="block_name" type="text" name="attr_kinetic_weapons_mod_name_1">
                            <textarea class="small_ta" name="attr_kinetic_weapons_mod_desc_1"></textarea>
                        </div>
                        <!--Modyfikacja broni dwa-->
                        <div class="block_mod_2">
                            <input class="block_name" type="text" name="attr_kinetic_weapons_mod_name_2">
                            <textarea class="small_ta" name="attr_kinetic_weapons_mod_desc_2"></textarea>
                        </div>
                    </div>
                </div>
            </div>
            <h3>Broń specjalna</h3>
            <!--Karta broni-->
            <div class="sub_sector">
                <!--Wyciągnięcie zmiennej, aby mogła zmieniać tło-->
                <input name="attr_special_weapon_quality" type="hidden" class="sheet-weapon-quality-switch">
                <div class="sheet-weapon-card">
                    <div class="left_part">
                        <!--Nazwa-->
                        <div class="param">
                            <input class="param_long" type="text" name="attr_special_weapon_name" value="">
                        </div>
                        <div class="param">
                            <!--Typ broni-->
                            <select class="select_long" name="attr_special_type" value="-">
                                <option value="">-</option>

                                <option disabled style="background-color: black; color: white; font-weight: bold;">
                                    ---Broń
                                    zwykła---</option>
                                <option value="Hand_cannon">Rewolwer</option>
                                <option value="Auto_rifle">Karabin automatyczny</option>
                                <option value="Scout_rifle">Karabin zwiadowczy</option>
                                <option value="Pulse_rifle">Karabin pulsacyjny</option>
                                <option value="Sidearm">Broń boczna</option>
                                <option value="Smg">Pistolet maszynowy</option>
                                <option value="Bow">Łuk</option>

                                <option disabled style="background-color: black; color: white; font-weight: bold;">
                                    ---Broń
                                    specjalna---</option>
                                <option value="Shotgun">Strzelba</option>
                                <option value="Sniper_rifle">Karabin snajperski</option>
                                <option value="Fusion_rifle">Karabin fuzyjny</option>
                                <option value="Light_grnd">Lekki Granatnik</option>

                                <option disabled style="background-color: black; color: white; font-weight: bold;">
                                    ---Broń
                                    ciężka---</option>
                                <option value="Machine_rifle">Karabin maszynowy</option>
                                <option value="Line_rifle">Karabin liniowy</option>
                                <option value="Rocket_launcher">Wyrzutnia rakiet</option>
                                <option value="Granade_launcher">Granatnik</option>
                                <option value="Sword">Miecz</option>
                            </select>
                        </div>
                        <!--Parametry broni-->
                        <div class="param">
                            <input class="readonly_input" type="text" name="attr_special_param_name_1" readonly>
                            <input class="param" type="text" name="attr_special_param1">
                        </div>
                        <div class="param">
                            <input class="readonly_input" type="text" name="attr_special_param_name_2" readonly>
                            <input class="param" type="text" name="attr_special_param2">
                        </div>
                        <div class="param">
                            <input class="readonly_input" type="text" name="attr_special_param_name_3" readonly>
                            <input class="param" type="text" name="attr_special_param3">
                        </div>
                        <div class="param">
                            <input class="readonly_input" type="text" name="attr_special_param_name_4" readonly>
                            <input class="param" type="text" name="attr_special_param4">
                        </div>
                        <div class="param">
                            <input class="readonly_input" type="text" name="attr_special_param_name_5" readonly>
                            <input class="param" type="text" name="attr_special_param5">
                        </div>
                        <div class="param">
                            <input class="readonly_input" type="text" name="attr_special_param_name_6" readonly>
                            <input class="param" type="text" name="attr_special_param6">
                        </div>
                        <div class="param">
                            <input class="readonly_input" type="text" name="attr_special_param_name_7" readonly>
                            <input class="param" type="text" name="attr_special_param7">
                        </div>
                        <div class="param">
                            <input class="readonly_input" type="text" value="Strzały" readonly>
                            <input class="param" type="number" name="attr_special_weapon_current_ammo" min="0" readonly>
                        </div>
                        <!--Wybór typu amunicji-->
                        <div class="param">
                            <input class="readonly_input" type="text" value="Amunicja" readonly>
                            <input class="readonly_amno_special" type="text" value="Specjalna" readonly>
                            <input type="hidden" name="attr_special_weapon_amno" value="special_amno">
                        </div>
                        <!--Wybór jakości-->
                        <div class="param">
                            <input class="readonly_input" type="text" value="Rzadkość" readonly>
                            <select class="sheet-quality-select" name="attr_special_weapon_quality" value="-">
                                <option value="-">-</option>
                                <option value="common">Zwykła</option>
                                <option value="uncommon">Niezwykła</option>
                                <option value="rare">Rzadka</option>
                                <option value="legend">Legendarna</option>
                                <option value="exotic">Egzotyczna</option>
                            </select>
                        </div>
                    </div>
                    <!--Wybór typu obrażeń-->
                    <div class="right_part">
                        <!--Wyciągnięcie zmiennej, aby mogła zmieniać grafikę żywiołu-->
                        <input name="attr_special_weapon_energy" type="hidden" class="sheet-energy-switch">
                        <div class="param">
                            <input class="readonly_input" type="text" value="Żywioł" readonly>
                            <select class="select_param" name="attr_special_weapon_energy">
                                <option value="">-</option>
                                <option value="kinetic">Kinetyczny</option>
                                <option value="arc">Arc</option>
                                <option value="void">Próżniowy</option>
                                <option value="solar">Solarny</option>
                            </select>
                        </div>
                        <!--Polę na grafikę żywiołu-->
                        <div class="image_div">
                            <img class="icon-energy">
                        </div>
                        <!--Wyciągnięcie zmiennej, aby mogła wyświetlać odpowiednią liczbę modyfikacji-->
                        <input name="attr_special_weapon_quality" type="hidden" class="sheet-block-mod-switch">
                        <!--Modyfikacja broni jeden-->
                        <div class="block_mod_1">
                            <input class="block_name" type="text" name="attr_special_weapons_mod_name_1">
                            <textarea class="small_ta" name="attr_special_weapons_mod_desc_1"></textarea>
                        </div>
                        <!--Modyfikacja broni dwa-->
                        <div class="block_mod_2">
                            <input class="block_name" type="text" name="attr_special_weapons_mod_name_2">
                            <textarea class="small_ta" name="attr_special_weapons_mod_desc_2"></textarea>
                        </div>
                    </div>
                </div>
            </div>
            <h3>Broń ciężka</h3>
            <!--Karta broni-->
            <div class="sub_sector">
                <!--Wyciągnięcie zmiennej, aby mogła zmieniać tło-->
                <input name="attr_heavy_weapon_quality" type="hidden" class="sheet-weapon-quality-switch">
                <div class="sheet-weapon-card">
                    <div class="left_part">
                        <!--Nazwa-->
                        <div class="param">
                            <input class="param_long" type="text" name="attr_heavy_weapon_name" value="">
                        </div>
                        <div class="param">
                            <!--Typ broni-->
                            <select class="select_long" name="attr_heavy_type" value="-">
                                <option value="">-</option>

                                <option disabled style="background-color: black; color: white; font-weight: bold;">
                                    ---Broń
                                    zwykła---</option>
                                <option value="Hand_cannon">Rewolwer</option>
                                <option value="Auto_rifle">Karabin automatyczny</option>
                                <option value="Scout_rifle">Karabin zwiadowczy</option>
                                <option value="Pulse_rifle">Karabin pulsacyjny</option>
                                <option value="Sidearm">Broń boczna</option>
                                <option value="Smg">Pistolet maszynowy</option>
                                <option value="Bow">Łuk</option>

                                <option disabled style="background-color: black; color: white; font-weight: bold;">
                                    ---Broń
                                    specjalna---</option>
                                <option value="Shotgun">Strzelba</option>
                                <option value="Sniper_rifle">Karabin snajperski</option>
                                <option value="Fusion_rifle">Karabin fuzyjny</option>
                                <option value="Light_grnd">Lekki Granatnik</option>

                                <option disabled style="background-color: black; color: white; font-weight: bold;">
                                    ---Broń
                                    ciężka---</option>
                                <option value="Machine_rifle">Karabin maszynowy</option>
                                <option value="Line_rifle">Karabin liniowy</option>
                                <option value="Rocket_launcher">Wyrzutnia rakiet</option>
                                <option value="Granade_launcher">Granatnik</option>
                                <option value="Sword">Miecz</option>
                            </select>
                        </div>
                        <!--Parametry broni-->
                        <div class="param">
                            <input class="readonly_input" type="text" name="attr_heavy_param_name_1" readonly>
                            <input class="param" type="text" name="attr_heavy_param1">
                        </div>
                        <div class="param">
                            <input class="readonly_input" type="text" name="attr_heavy_param_name_2" readonly>
                            <input class="param" type="text" name="attr_heavy_param2">
                        </div>
                        <div class="param">
                            <input class="readonly_input" type="text" name="attr_heavy_param_name_3" readonly>
                            <input class="param" type="text" name="attr_heavy_param3">
                        </div>
                        <div class="param">
                            <input class="readonly_input" type="text" name="attr_heavy_param_name_4" readonly>
                            <input class="param" type="text" name="attr_heavy_param4">
                        </div>
                        <div class="param">
                            <input class="readonly_input" type="text" name="attr_heavy_param_name_5" readonly>
                            <input class="param" type="text" name="attr_heavy_param5">
                        </div>
                        <div class="param">
                            <input class="readonly_input" type="text" name="attr_heavy_param_name_6" readonly>
                            <input class="param" type="text" name="attr_heavy_param6">
                        </div>
                        <div class="param">
                            <input class="readonly_input" type="text" name="attr_heavy_param_name_7" readonly>
                            <input class="param" type="text" name="attr_heavy_param7">
                        </div>
                        <div class="param">
                            <input class="readonly_input" type="text" value="Strzały" readonly>
                            <input class="param" type="number" name="attr_heavy_weapon_current_ammo" min="0" readonly>
                        </div>
                        <!--Wybór typu amunicji-->
                        <div class="param">
                            <input class="readonly_input" type="text" value="Amunicja" readonly>
                            <input class="readonly_amno_heavy" type="text" value="Ciężka" readonly>
                            <input type="hidden" name="attr_heavy_weapon_amno" value="heavy_amno">
                        </div>
                        <!--Wybór jakości-->
                        <div class="param">
                            <input class="readonly_input" type="text" value="Rzadkość" readonly>
                            <select class="sheet-quality-select" name="attr_heavy_weapon_quality" value="-">
                                <option value="-">-</option>
                                <option value="common">Zwykła</option>
                                <option value="uncommon">Niezwykła</option>
                                <option value="rare">Rzadka</option>
                                <option value="legend">Legendarna</option>
                                <option value="exotic">Egzotyczna</option>
                            </select>
                        </div>
                    </div>
                    <!--Wybór typu obrażeń-->
                    <div class="right_part">
                        <!--Wyciągnięcie zmiennej, aby mogła zmieniać grafikę żywiołu-->
                        <input name="attr_heavy_weapon_energy" type="hidden" class="sheet-energy-switch">
                        <div class="param">
                            <input class="readonly_input" type="text" value="Żywioł" readonly>
                            <select class="select_param" name="attr_heavy_weapon_energy">
                                <option value="">-</option>
                                <option value="kinetic">Kinetyczny</option>
                                <option value="arc">Arc</option>
                                <option value="void">Próżniowy</option>
                                <option value="solar">Solarny</option>
                            </select>
                        </div>
                        <!--Polę na grafikę żywiołu-->
                        <div class="image_div">
                            <img class="icon-energy">
                        </div>
                        <!--Wyciągnięcie zmiennej, aby mogła wyświetlać odpowiednią liczbę modyfikacji-->
                        <input name="attr_heavy_weapon_quality" type="hidden" class="sheet-block-mod-switch">
                        <!--Modyfikacja broni jeden-->
                        <div class="block_mod_1">
                            <input class="block_name" type="text" name="attr_heavy_weapons_mod_name_1">
                            <textarea class="small_ta" name="attr_heavy_weapons_mod_desc_1"></textarea>
                        </div>
                        <!--Modyfikacja broni dwa-->
                        <div class="block_mod_2">
                            <input class="block_name" type="text" name="attr_heavy_weapons_mod_name_2">
                            <textarea class="small_ta" name="attr_heavy_weapons_mod_desc_2"></textarea>
                        </div>
                    </div>
                </div>
            </div>
            <!--Pancerze-->
            <h3>Głowa</h3>
            <!--Karta pancerza-->
            <div class="sub_sector">
                <!--Wyciągnięcie zmiennej, aby mogła zmieniać kolor tła-->
                <input name="attr_head_armor_quality" type="hidden" class="sheet-armor-quality-switch">
                <div class="sheet-armor-card">
                    <div class="left_part">
                        <!--Parametry pancerza-->
                        <div class="param">
                            <input class="param_long" type="text" name="attr_head_armor_name" value="">
                        </div>
                        <div class="param">
                            <input class="readonly_input" type="text" value="Mobilność" readonly>
                            <input class="param" type="text" value="0" name="attr_head_armor_mobility">
                        </div>
                        <div class="param">
                            <input class="readonly_input" type="text" value="Defensywa" readonly>
                            <input class="param" type="text" value="0" name="attr_head_armor_defence">
                        </div>
                        <div class="param">
                            <input class="readonly_input" type="text" value="Regeneracja" readonly>
                            <input class="param" type="text" value="0" name="attr_head_armor_regeneration">
                        </div>
                        <div class="param">
                            <input class="readonly_input" type="text" value="Dyscyplina" readonly>
                            <input class="param" type="text" value="0" name="attr_head_armor_discipline">
                        </div>
                        <div class="param">
                            <input class="readonly_input" type="text" value="Inteligencja" readonly>
                            <input class="param" type="text" value="0" name="attr_head_armor_inteligence">
                        </div>
                        <div class="param">
                            <input class="readonly_input" type="text" value="Krzepa" readonly>
                            <input class="param" type="text" value="0" name="attr_head_armor_strong">
                        </div>
                        <div class="param">
                            <input class="readonly_input" type="text" value="Pancerz" readonly>
                            <input class="param" type="text" value="0" name="attr_head_armor_value">
                        </div>
                        <!--Klasa postaci, dla jakiej przeznaczony jest pancerz-->
                        <div class="param">
                            <input class="readonly_input" type="text" value="Klasa" readonly>
                            <select class="sheet-amno-select" name="attr_head_armor_class" value="-">
                                <option value="-">-</option>
                                <option value="titan">Tytan</option>
                                <option value="hunter">Łowca</option>
                                <option value="warlock">Czarownik</option>
                            </select>
                        </div>
                        <!--Rzadkość pancerza-->
                        <div class="param">
                            <input class="readonly_input" type="text" value="Rzadkość" readonly>
                            <select class="sheet-quality-select" name="attr_head_armor_quality" value="-">
                                <option value="-">-</option>
                                <option value="common">Zwykła</option>
                                <option value="uncommon">Niezwykła</option>
                                <option value="rare">Rzadka</option>
                                <option value="legend">Legendarna</option>
                                <option value="exotic">Egzotyczna</option>
                            </select>
                        </div>
                    </div>
                    <div class="right_part">
                        <!--Wybór części pancerza-->
                        <div class="param">
                            <input class="readonly_input" type="text" value="Osłona" readonly>
                            <input class="readonly_armor" type="text" value="Głowy" readonly>
                            <input type="hidden" name="attr_head_armor_location" value="head" readonly>
                        </div>
                        <!--Polę na grafikę pancerza-->
                        <div class="image_div">
                            <img class="icon-armor-part-head">
                        </div>
                        <!--Wyciągnięcie zmiennej, aby mogła wyświetlać odpowiednią liczbę modyfikacji-->
                        <input name="attr_head_armor_quality" type="hidden" class="sheet-block-mod-switch">
                        <!--Modyfikacja 1-->
                        <div class="block_mod_1">
                            <input class="block_name" type="text" name="attr_head_armor_mod_name_1">
                            <textarea class="small_ta" name="attr_head_armor_mod_desc_1"></textarea>
                        </div>
                        <!--Modyfikacja 2-->
                        <div class="block_mod_2">
                            <input class="block_name" type="text" name="attr_head_armor_mod_name_2">
                            <textarea class="small_ta" name="attr_head_armor_mod_desc_2"></textarea>
                        </div>
                    </div>
                </div>
            </div>
            <h3>Ręcę</h3>
            <!--Karta pancerza-->
            <div class="sub_sector">
                <!--Wyciągnięcie zmiennej, aby mogła zmieniać kolor tła-->
                <input name="attr_hands_armor_quality" type="hidden" class="sheet-armor-quality-switch">
                <div class="sheet-armor-card">
                    <div class="left_part">
                        <!--Parametry pancerza-->
                        <div class="param">
                            <input class="param_long" type="text" name="attr_hands_armor_name" value="">
                        </div>
                        <div class="param">
                            <input class="readonly_input" type="text" value="Mobilność" readonly>
                            <input class="param" type="text" value="0" name="attr_hands_armor_mobility">
                        </div>
                        <div class="param">
                            <input class="readonly_input" type="text" value="Defensywa" readonly>
                            <input class="param" type="text" value="0" name="attr_hands_armor_defence">
                        </div>
                        <div class="param">
                            <input class="readonly_input" type="text" value="Regeneracja" readonly>
                            <input class="param" type="text" value="0" name="attr_hands_armor_regeneration">
                        </div>
                        <div class="param">
                            <input class="readonly_input" type="text" value="Dyscyplina" readonly>
                            <input class="param" type="text" value="0" name="attr_hands_armor_discipline">
                        </div>
                        <div class="param">
                            <input class="readonly_input" type="text" value="Inteligencja" readonly>
                            <input class="param" type="text" value="0" name="attr_hands_armor_inteligence">
                        </div>
                        <div class="param">
                            <input class="readonly_input" type="text" value="Krzepa" readonly>
                            <input class="param" type="text" value="0" name="attr_hands_armor_strong">
                        </div>
                        <div class="param">
                            <input class="readonly_input" type="text" value="Pancerz" readonly>
                            <input class="param" type="text" value="0" name="attr_hands_armor_value">
                        </div>
                        <!--Klasa postaci, dla jakiej przeznaczony jest pancerz-->
                        <div class="param">
                            <input class="readonly_input" type="text" value="Klasa" readonly>
                            <select class="sheet-amno-select" name="attr_hands_armor_class" value="-">
                                <option value="-">-</option>
                                <option value="titan">Tytan</option>
                                <option value="hunter">Łowca</option>
                                <option value="warlock">Czarownik</option>
                            </select>
                        </div>
                        <!--Rzadkość pancerza-->
                        <div class="param">
                            <input class="readonly_input" type="text" value="Rzadkość" readonly>
                            <select class="sheet-quality-select" name="attr_hands_armor_quality" value="-">
                                <option value="-">-</option>
                                <option value="common">Zwykła</option>
                                <option value="uncommon">Niezwykła</option>
                                <option value="rare">Rzadka</option>
                                <option value="legend">Legendarna</option>
                                <option value="exotic">Egzotyczna</option>
                            </select>
                        </div>
                    </div>
                    <div class="right_part">
                        <!--Wybór części pancerza-->
                        <div class="param">
                            <input class="readonly_input" type="text" value="Osłona" readonly>
                            <input class="readonly_armor" type="text" value="Rąk" readonly>
                            <input type="hidden" name="attr_hands_armor_location" value="hands" readonly>
                        </div>
                        <!--Polę na grafikę pancerza-->
                        <div class="image_div">
                            <img class="icon-armor-part-hands">
                        </div>
                        <!--Wyciągnięcie zmiennej, aby mogła wyświetlać odpowiednią liczbę modyfikacji-->
                        <input name="attr_hands_armor_quality" type="hidden" class="sheet-block-mod-switch">
                        <!--Modyfikacja 1-->
                        <div class="block_mod_1">
                            <input class="block_name" type="text" name="attr_hands_armor_mod_name_1">
                            <textarea class="small_ta" name="attr_hands_armor_mod_desc_1"></textarea>
                        </div>
                        <!--Modyfikacja 2-->
                        <div class="block_mod_2">
                            <input class="block_name" type="text" name="attr_hands_armor_mod_name_2">
                            <textarea class="small_ta" name="attr_hands_armor_mod_desc_2"></textarea>
                        </div>
                    </div>
                </div>
            </div>
            <h3>Korpus</h3>
            <!--Karta pancerza-->
            <div class="sub_sector">
                <!--Wyciągnięcie zmiennej, aby mogła zmieniać kolor tła-->
                <input name="attr_body_armor_quality" type="hidden" class="sheet-armor-quality-switch">
                <div class="sheet-armor-card">
                    <div class="left_part">
                        <!--Parametry pancerza-->
                        <div class="param">
                            <input class="param_long" type="text" name="attr_body_armor_name" value="">
                        </div>
                        <div class="param">
                            <input class="readonly_input" type="text" value="Mobilność" readonly>
                            <input class="param" type="text" value="0" name="attr_body_armor_mobility">
                        </div>
                        <div class="param">
                            <input class="readonly_input" type="text" value="Defensywa" readonly>
                            <input class="param" type="text" value="0" name="attr_body_armor_defence">
                        </div>
                        <div class="param">
                            <input class="readonly_input" type="text" value="Regeneracja" readonly>
                            <input class="param" type="text" value="0" name="attr_body_armor_regeneration">
                        </div>
                        <div class="param">
                            <input class="readonly_input" type="text" value="Dyscyplina" readonly>
                            <input class="param" type="text" value="0" name="attr_body_armor_discipline">
                        </div>
                        <div class="param">
                            <input class="readonly_input" type="text" value="Inteligencja" readonly>
                            <input class="param" type="text" value="0" name="attr_body_armor_inteligence">
                        </div>
                        <div class="param">
                            <input class="readonly_input" type="text" value="Krzepa" readonly>
                            <input class="param" type="text" value="0" name="attr_body_armor_strong">
                        </div>
                        <div class="param">
                            <input class="readonly_input" type="text" value="Pancerz" readonly>
                            <input class="param" type="text" value="0" name="attr_body_armor_value">
                        </div>
                        <!--Klasa postaci, dla jakiej przeznaczony jest pancerz-->
                        <div class="param">
                            <input class="readonly_input" type="text" value="Klasa" readonly>
                            <select class="sheet-amno-select" name="attr_body_armor_class" value="-">
                                <option value="-">-</option>
                                <option value="titan">Tytan</option>
                                <option value="hunter">Łowca</option>
                                <option value="warlock">Czarownik</option>
                            </select>
                        </div>
                        <!--Rzadkość pancerza-->
                        <div class="param">
                            <input class="readonly_input" type="text" value="Rzadkość" readonly>
                            <select class="sheet-quality-select" name="attr_body_armor_quality" value="-">
                                <option value="-">-</option>
                                <option value="common">Zwykła</option>
                                <option value="uncommon">Niezwykła</option>
                                <option value="rare">Rzadka</option>
                                <option value="legend">Legendarna</option>
                                <option value="exotic">Egzotyczna</option>
                            </select>
                        </div>
                    </div>
                    <div class="right_part">
                        <!--Wybór części pancerza-->
                        <div class="param">
                            <input class="readonly_input" type="text" value="Osłona" readonly>
                            <input class="readonly_armor" type="text" value="Korpusu" readonly>
                            <input type="hidden" name="attr_body_armor_location" value="body" readonly>
                        </div>
                        <!--Polę na grafikę pancerza-->
                        <div class="image_div">
                            <img class="icon-armor-part-body">
                        </div>
                        <!--Wyciągnięcie zmiennej, aby mogła wyświetlać odpowiednią liczbę modyfikacji-->
                        <input name="attr_body_armor_quality" type="hidden" class="sheet-block-mod-switch">
                        <!--Modyfikacja 1-->
                        <div class="block_mod_1">
                            <input class="block_name" type="text" name="attr_body_armor_mod_name_1">
                            <textarea class="small_ta" name="attr_body_armor_mod_desc_1"></textarea>
                        </div>
                        <!--Modyfikacja 2-->
                        <div class="block_mod_2">
                            <input class="block_name" type="text" name="attr_body_armor_mod_name_2">
                            <textarea class="small_ta" name="attr_body_armor_mod_desc_2"></textarea>
                        </div>
                    </div>
                </div>
            </div>
            <h3>Nogi</h3>
            <!--Karta pancerza-->
            <div class="sub_sector">
                <!--Wyciągnięcie zmiennej, aby mogła zmieniać kolor tła-->
                <input name="attr_legs_armor_quality" type="hidden" class="sheet-armor-quality-switch">
                <div class="sheet-armor-card">
                    <div class="left_part">
                        <!--Parametry pancerza-->
                        <div class="param">
                            <input class="param_long" type="text" name="attr_legs_armor_name" value="">
                        </div>
                        <div class="param">
                            <input class="readonly_input" type="text" value="Mobilność" readonly>
                            <input class="param" type="text" value="0" name="attr_legs_armor_mobility">
                        </div>
                        <div class="param">
                            <input class="readonly_input" type="text" value="Defensywa" readonly>
                            <input class="param" type="text" value="0" name="attr_legs_armor_defence">
                        </div>
                        <div class="param">
                            <input class="readonly_input" type="text" value="Regeneracja" readonly>
                            <input class="param" type="text" value="0" name="attr_legs_armor_regeneration">
                        </div>
                        <div class="param">
                            <input class="readonly_input" type="text" value="Dyscyplina" readonly>
                            <input class="param" type="text" value="0" name="attr_legs_armor_discipline">
                        </div>
                        <div class="param">
                            <input class="readonly_input" type="text" value="Inteligencja" readonly>
                            <input class="param" type="text" value="0" name="attr_legs_armor_inteligence">
                        </div>
                        <div class="param">
                            <input class="readonly_input" type="text" value="Krzepa" readonly>
                            <input class="param" type="text" value="0" name="attr_legs_armor_strong">
                        </div>
                        <div class="param">
                            <input class="readonly_input" type="text" value="Pancerz" readonly>
                            <input class="param" type="text" value="0" name="attr_legs_armor_value">
                        </div>
                        <!--Klasa postaci, dla jakiej przeznaczony jest pancerz-->
                        <div class="param">
                            <input class="readonly_input" type="text" value="Klasa" readonly>
                            <select class="sheet-amno-select" name="attr_legs_armor_class" value="-">
                                <option value="-">-</option>
                                <option value="titan">Tytan</option>
                                <option value="hunter">Łowca</option>
                                <option value="warlock">Czarownik</option>
                            </select>
                        </div>
                        <!--Rzadkość pancerza-->
                        <div class="param">
                            <input class="readonly_input" type="text" value="Rzadkość" readonly>
                            <select class="sheet-quality-select" name="attr_legs_armor_quality" value="-">
                                <option value="-">-</option>
                                <option value="common">Zwykła</option>
                                <option value="uncommon">Niezwykła</option>
                                <option value="rare">Rzadka</option>
                                <option value="legend">Legendarna</option>
                                <option value="exotic">Egzotyczna</option>
                            </select>
                        </div>
                    </div>
                    <div class="right_part">
                        <!--Wybór części pancerza-->
                        <div class="param">
                            <input class="readonly_input" type="text" value="Osłona" readonly>
                            <input class="readonly_armor" type="text" value="Nóg" readonly>
                            <input type="hidden" name="attr_legs_armor_location" value="legs" readonly>
                        </div>
                        <!--Polę na grafikę pancerza-->
                        <div class="image_div">
                            <img class="icon-armor-part-legs">
                        </div>
                        <!--Wyciągnięcie zmiennej, aby mogła wyświetlać odpowiednią liczbę modyfikacji-->
                        <input name="attr_legs_armor_quality" type="hidden" class="sheet-block-mod-switch">
                        <!--Modyfikacja 1-->
                        <div class="block_mod_1">
                            <input class="block_name" type="text" name="attr_legs_armor_mod_name_1">
                            <textarea class="small_ta" name="attr_legs_armor_mod_desc_1"></textarea>
                        </div>
                        <!--Modyfikacja 2-->
                        <div class="block_mod_2">
                            <input class="block_name" type="text" name="attr_legs_armor_mod_name_2">
                            <textarea class="small_ta" name="attr_legs_armor_mod_desc_2"></textarea>
                        </div>
                    </div>
                </div>
            </div>
            <h3>Statek</h3>
            <!--Karta statku-->
            <div class="sub_sector">
                <!--Wyciągnięcie zmiennej, aby mogła zmieniać tło-->
                <input name="attr_spaceship_quality" type="hidden" class="sheet-spaceship-quality-switch">
                <div class="sheet-spaceship-card">
                    <div class="upper_line">
                        <!--Nazwa-->
                        <div class="param">
                            <input class="param_long" type="text" name="attr_spaceship_name" value="">
                        </div>
                        <!--Polę na grafikę statku-->
                        <div class="image_div">
                            <img class="icon-spaceship">
                        </div>
                    </div>
                    <div class="lower_line">
                        <div class="left_part">
                            <div class="param">
                                <h4>Statystyki</h4>
                            </div>
                            <!--Parametry statku-->
                            <div class="param">
                                <input class="readonly_input" type="text" value="Przyspieszenie" readonly>
                                <input class="param" type="text" name="attr_spaceship_acceleration">
                            </div>
                            <div class="param">
                                <input class="readonly_input" type="text" value="Prędkość max" readonly>
                                <input class="param" type="text" name="attr_spaceship_max_speed">
                            </div>
                            <div class="param">
                                <input class="readonly_input" type="text" value="Wytrzymałość" readonly>
                                <input class="param" type="text" name="attr_spaceship_tough">
                            </div>
                            <!--Wybór jakości-->
                            <div class="param">
                                <input class="readonly_input" type="text" value="Rzadkość" readonly>
                                <select class="sheet-quality-select" name="attr_spaceship_quality" value="-">
                                    <option value="-">-</option>
                                    <option value="common">Zwykła</option>
                                    <option value="uncommon">Niezwykła</option>
                                    <option value="rare">Rzadka</option>
                                    <option value="legend">Legendarna</option>
                                    <option value="exotic">Egzotyczna</option>
                                </select>
                            </div>
                        </div>
                        <div class="right_part">
                            <h4>Opis</h4>
                            <div class="param">
                                <input class="readonly_input" type="text" value="Broń podstawowa" readonly>
                                <input class="param" type="text" name="attr_spaceship_weapon_damage">
                                <input class="param" type="text" name="attr_spaceship_weapon_armor_penetration">
                            </div>
                            <div class="param">
                                <input class="readonly_input" type="text" value="Modyfikacje" readonly>
                                <input class="spaceship_mod1" type="text" name="attr_spaceship_mod1">
                                <input class="spaceship_mod2" type="text" name="attr_spaceship_mod2">
                            </div>
                            <div class="param">
                                <input class="readonly_input" type="text" value="Dodatkowy ekwipunek" readonly>
                                <textarea class="small_ta" name="attr_spaceship_eq"></textarea>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
            <h3>Wróbel</h3>
            <!--Karta wróbla-->
            <div class="sub_sector">
                <!--Wyciągnięcie zmiennej, aby mogła zmieniać tło-->
                <input name="attr_sparrow_quality" type="hidden" class="sheet-sparrow-quality-switch">
                <div class="sheet-sparrow-card">
                    <div class="upper_line">
                        <!--Nazwa-->
                        <div class="param">
                            <input class="param_long" type="text" name="attr_sparrow_name" value="">
                        </div>
                        <!--Polę na grafikę statku-->
                        <div class="image_div">
                            <img class="icon-sparrow">
                        </div>
                    </div>
                    <div class="lower_line">
                        <div class="left_part">
                            <div class="param">
                                <h4>Statystyki</h4>
                            </div>
                            <!--Parametry statku-->
                            <div class="param">
                                <input class="readonly_input" type="text" value="Przyspieszenie" readonly>
                                <input class="param" type="text" name="attr_sparrow_acceleration">
                            </div>
                            <div class="param">
                                <input class="readonly_input" type="text" value="Prędkość max" readonly>
                                <input class="param" type="text" name="attr_sparrow_max_speed">
                            </div>
                            <div class="param">
                                <input class="readonly_input" type="text" value="Wytrzymałość" readonly>
                                <input class="param" type="text" name="attr_sparrow_tough">
                            </div>
                            <div class="param">
                                <input class="readonly_input" type="text" value="Pojemność D." readonly>
                                <input class="param" type="text" name="attr_sparrow_nitro">
                            </div>
                            <div class="param">
                                <input class="readonly_input" type="text" value="Regeneracja D." readonly>
                                <input class="param" type="text" name="attr_sparrow_nitro_reg">
                            </div>
                            <!--Wybór jakości-->
                            <div class="param" id="sparrow-quality">
                                <input class="readonly_input" type="text" value="Rzadkość" readonly>
                                <select class="sheet-quality-select" name="attr_sparrow_quality" value="-">
                                    <option value="-">-</option>
                                    <option value="common">Zwykła</option>
                                    <option value="uncommon">Niezwykła</option>
                                    <option value="rare">Rzadka</option>
                                    <option value="legend">Legendarna</option>
                                    <option value="exotic">Egzotyczna</option>
                                </select>
                            </div>
                        </div>
                        <div class="right_part">
                            <h4>Opis</h4>
                            <div class="param">
                                <input class="readonly_input" type="text" value="Modyfikacje" readonly>
                                <input class="sparrow_mod1" type="text" name="attr_sparrow_mod1">
                                <input class="sparrow_mod2" type="text" name="attr_sparrow_mod2">
                                <input class="sparrow_mod3" type="text" name="attr_sparrow_mod3">
                            </div>
                            <div class="param">
                                <input class="readonly_input" type="text" value="Dodatkowy ekwipunek" readonly>
                                <textarea class="small_ta" name="attr_sparrow_eq"></textarea>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
        <!--Karty nie zaekwipowane Strona prawa-->
        <div class="sector" id="Out_hand">
            <h3>Ekwipunek</h3>
            <fieldset class="repeating_card">
                <input type="hidden" class="sheet-switch-card-type" name="attr_card_type" value="-">
                <div class="sub_sector">
                    <div class="general-card">
                        <!--Zmiana kształtu karty-->
                        <input type="hidden" class="sheet-switch-card-type" name="attr_card_type" value="-">
                        <div class="card-selector">
                            <h4>Wybierz typ karty</h4>
                            <select name="attr_card_type" value="-">
                                <option value="-">-</option>
                                <option value="gun">Broń</option>
                                <option value="armor">Pancerz</option>
                                <option value="spaceship">Statek</option>
                                <option value="sparrow">Wróbel</option>
                            </select>
                        </div>
                        <!--Karta broni-->
                        <div class="gun-card">
                            <!--Wyciągnięcie zmiennej, aby mogła zmieniać tło-->
                            <input name="attr_weapon_quality" type="hidden" class="sheet-weapon-quality-switch">
                            <div class="sheet-weapon-card">
                                <div class="left_part">
                                    <!--Nazwa-->
                                    <div class="param">
                                        <input class="param_long" type="text" name="attr_weapon_name" value="">
                                    </div>
                                    <div class="param">
                                        <!--Typ broni-->
                                        <select class="select_long" name="attr_type" value="-">
                                            <option value="">-</option>

                                            <option disabled
                                                style="background-color: black; color: white; font-weight: bold;">
                                                ---Broń
                                                zwykła---</option>
                                            <option value="Hand_cannon">Rewolwer</option>
                                            <option value="Auto_rifle">Karabin automatyczny</option>
                                            <option value="Scout_rifle">Karabin zwiadowczy</option>
                                            <option value="Pulse_rifle">Karabin pulsacyjny</option>
                                            <option value="Sidearm">Broń boczna</option>
                                            <option value="Smg">Pistolet maszynowy</option>
                                            <option value="Bow">Łuk</option>

                                            <option disabled
                                                style="background-color: black; color: white; font-weight: bold;">
                                                ---Broń
                                                specjalna---</option>
                                            <option value="Shotgun">Strzelba</option>
                                            <option value="Sniper_rifle">Karabin snajperski</option>
                                            <option value="Fusion_rifle">Karabin fuzyjny</option>
                                            <option value="Light_grnd">Lekki Granatnik</option>

                                            <option disabled
                                                style="background-color: black; color: white; font-weight: bold;">
                                                ---Broń
                                                ciężka---</option>
                                            <option value="Machine_rifle">Karabin maszynowy</option>
                                            <option value="Line_rifle">Karabin liniowy</option>
                                            <option value="Rocket_launcher">Wyrzutnia rakiet</option>
                                            <option value="Granade_launcher">Granatnik</option>
                                            <option value="Sword">Miecz</option>
                                        </select>
                                    </div>
                                    <!--Parametry broni-->
                                    <div class="param">
                                        <input class="readonly_input" type="text" name="attr_param_name_1" readonly>
                                        <input class="param" type="text" name="attr_param1">
                                    </div>
                                    <div class="param">
                                        <input class="readonly_input" type="text" name="attr_param_name_2" readonly>
                                        <input class="param" type="text" name="attr_param2">
                                    </div>
                                    <div class="param">
                                        <input class="readonly_input" type="text" name="attr_param_name_3" readonly>
                                        <input class="param" type="text" name="attr_param3">
                                    </div>
                                    <div class="param">
                                        <input class="readonly_input" type="text" name="attr_param_name_4" readonly>
                                        <input class="param" type="text" name="attr_param4">
                                    </div>
                                    <div class="param">
                                        <input class="readonly_input" type="text" name="attr_param_name_5" readonly>
                                        <input class="param" type="text" name="attr_param5">
                                    </div>
                                    <div class="param">
                                        <input class="readonly_input" type="text" name="attr_param_name_6" readonly>
                                        <input class="param" type="text" name="attr_param6">
                                    </div>
                                    <div class="param">
                                        <input class="readonly_input" type="text" name="attr_param_name_7" readonly>
                                        <input class="param" type="text" name="attr_param7">
                                    </div>
                                    <div class="param">
                                        <input class="readonly_input" type="text" value="Strzały" readonly>
                                        <input class="param" type="number" name="attr_weapon_current_ammo" min="0">
                                    </div>
                                    <!--Wybór typu amunicji-->
                                    <div class="param">
                                        <!--Wyciągnięcie zmiennej, aby mogła zmieniać kolor czcionki-->
                                        <input name="attr_weapon_amno" type="hidden" class="sheet-amno-switch">
                                        <input class="readonly_input" type="text" value="Amunicja" readonly>
                                        <select class="sheet-amno-select" name="attr_weapon_amno" value="-">
                                            <option value="-">-</option>
                                            <option style="color:#aeaeae;" value="kinetic_amno">Kinetyczna</option>
                                            <option style="color:#3bff4f;" value="special_amno">Specjalna</option>
                                            <option style="color:#b300ff;" value="heavy_amno">Ciężka</option>
                                        </select>
                                    </div>
                                    <!--Wybór jakości-->
                                    <div class="param">
                                        <input class="readonly_input" type="text" value="Rzadkość" readonly>
                                        <select class="sheet-quality-select" name="attr_weapon_quality" value="-">
                                            <option value="-">-</option>
                                            <option value="common">Zwykła</option>
                                            <option value="uncommon">Niezwykła</option>
                                            <option value="rare">Rzadka</option>
                                            <option value="legend">Legendarna</option>
                                            <option value="exotic">Egzotyczna</option>
                                        </select>
                                    </div>
                                </div>
                                <!--Wybór typu obrażeń-->
                                <div class="right_part">
                                    <!--Wyciągnięcie zmiennej, aby mogła zmieniać grafikę żywiołu-->
                                    <input name="attr_weapon_energy" type="hidden" class="sheet-energy-switch">
                                    <div class="param">
                                        <input class="readonly_input" type="text" value="Żywioł" readonly>
                                        <select class="select_param" name="attr_weapon_energy">
                                            <option value="">-</option>
                                            <option value="kinetic">Kinetyczny</option>
                                            <option value="arc">Arc</option>
                                            <option value="void">Próżniowy</option>
                                            <option value="solar">Solarny</option>
                                        </select>
                                    </div>
                                    <!--Polę na grafikę żywiołu-->
                                    <div class="image_div">
                                        <img class="icon-energy">
                                    </div>
                                    <!--Wyciągnięcie zmiennej, aby mogła wyświetlać odpowiednią liczbę modyfikacji-->
                                    <input name="attr_weapon_quality" type="hidden" class="sheet-block-mod-switch">
                                    <!--Modyfikacja broni jeden-->
                                    <div class="block_mod_1">
                                        <input class="block_name" type="text" name="attr_weapons_mod_name_1">
                                        <textarea class="small_ta" name="attr_weapons_mod_desc_1"></textarea>
                                    </div>
                                    <!--Modyfikacja broni dwa-->
                                    <div class="block_mod_2">
                                        <input class="block_name" type="text" name="attr_weapons_mod_name_2">
                                        <textarea class="small_ta" name="attr_weapons_mod_desc_2"></textarea>
                                    </div>
                                </div>
                            </div>
                        </div>
                        <!--Karta pancerza-->
                        <div class="armor-card">
                            <!--Wyciągnięcie zmiennej, aby mogła zmieniać kolor tła-->
                            <input name="attr_armor_quality" type="hidden" class="sheet-armor-quality-switch">
                            <div class="sheet-armor-card">
                                <div class="left_part">
                                    <!--Parametry pancerza-->
                                    <div class="param">
                                        <input class="param_long" type="text" name="attr_armor_name" value="">
                                    </div>
                                    <div class="param">
                                        <input class="readonly_input" type="text" value="Mobilność" readonly>
                                        <input class="param" type="text" value="0" name="attr_armor_mobility">
                                    </div>
                                    <div class="param">
                                        <input class="readonly_input" type="text" value="Defensywa" readonly>
                                        <input class="param" type="text" value="0" name="attr_armor_defence">
                                    </div>
                                    <div class="param">
                                        <input class="readonly_input" type="text" value="Regeneracja" readonly>
                                        <input class="param" type="text" value="0" name="attr_armor_regeneration">
                                    </div>
                                    <div class="param">
                                        <input class="readonly_input" type="text" value="Dyscyplina" readonly>
                                        <input class="param" type="text" value="0" name="attr_armor_discipline">
                                    </div>
                                    <div class="param">
                                        <input class="readonly_input" type="text" value="Inteligencja" readonly>
                                        <input class="param" type="text" value="0" name="attr_armor_inteligence">
                                    </div>
                                    <div class="param">
                                        <input class="readonly_input" type="text" value="Krzepa" readonly>
                                        <input class="param" type="text" value="0" name="attr_armor_strong">
                                    </div>
                                    <div class="param">
                                        <input class="readonly_input" type="text" value="Pancerz" readonly>
                                        <input class="param" type="text" value="0" name="attr_armor_value">
                                    </div>
                                    <!--Klasa postaci, dla jakiej przeznaczony jest pancerz-->
                                    <div class="param">
                                        <input class="readonly_input" type="text" value="Klasa" readonly>
                                        <select class="sheet-amno-select" name="attr_armor_class" value="-">
                                            <option value="-">-</option>
                                            <option value="titan">Tytan</option>
                                            <option value="hunter">Łowca</option>
                                            <option value="warlock">Czarownik</option>
                                        </select>
                                    </div>
                                    <!--Rzadkość pancerza-->
                                    <div class="param">
                                        <input class="readonly_input" type="text" value="Rzadkość" readonly>
                                        <select class="sheet-quality-select" name="attr_armor_quality" value="-">
                                            <option value="-">-</option>
                                            <option value="common">Zwykła</option>
                                            <option value="uncommon">Niezwykła</option>
                                            <option value="rare">Rzadka</option>
                                            <option value="legend">Legendarna</option>
                                            <option value="exotic">Egzotyczna</option>
                                        </select>
                                    </div>
                                </div>
                                <div class="right_part">
                                    <!--Wyciągnięcie zmiennej, aby mogła zmieniać grafikę pancerza-->
                                    <input name="attr_armor_location" type="hidden" class="sheet-armor-switch">
                                    <!--Wybór części pancerza-->
                                    <div class="param">
                                        <input class="readonly_input" type="text" value="Osłona" readonly>
                                        <select class="select_param" name="attr_armor_location">
                                            <option value="">-</option>
                                            <option value="head">Głowy</option>
                                            <option value="body">Korpusu</option>
                                            <option value="hands">Rąk</option>
                                            <option value="legs">Nóg</option>
                                        </select>
                                    </div>
                                    <!--Polę na grafikę pancerza-->
                                    <div class="image_div">
                                        <img class="icon-armor-part">
                                    </div>
                                    <!--Wyciągnięcie zmiennej, aby mogła wyświetlać odpowiednią liczbę modyfikacji-->
                                    <input name="attr_armor_quality" type="hidden" class="sheet-block-mod-switch">
                                    <!--Modyfikacja 1-->
                                    <div class="block_mod_1">
                                        <input class="block_name" type="text" name="attr_armor_mod_name_1">
                                        <textarea class="small_ta" name="attr_armor_mod_desc_1"></textarea>
                                    </div>
                                    <!--Modyfikacja 2-->
                                    <div class="block_mod_2">
                                        <input class="block_name" type="text" name="attr_armor_mod_name_2">
                                        <textarea class="small_ta" name="attr_armor_mod_desc_2"></textarea>
                                    </div>
                                </div>
                            </div>
                        </div>
                        <!--Karta statku-->
                        <div class="spaceship-card">
                            <!--Wyciągnięcie zmiennej, aby mogła zmieniać tło-->
                            <input name="attr_spaceship_quality" type="hidden" class="sheet-spaceship-quality-switch">
                            <div class="sheet-spaceship-card">
                                <div class="upper_line">
                                    <!--Nazwa-->
                                    <div class="param">
                                        <input class="param_long" type="text" name="attr_spaceship_name" value="">
                                    </div>
                                    <!--Polę na grafikę statku-->
                                    <div class="image_div">
                                        <img class="icon-spaceship">
                                    </div>
                                </div>
                                <div class="lower_line">
                                    <div class="left_part">
                                        <div class="param">
                                            <h4>Statystyki</h4>
                                        </div>
                                        <!--Parametry statku-->
                                        <div class="param">
                                            <input class="readonly_input" type="text" value="Przyspieszenie" readonly>
                                            <input class="param" type="text" name="attr_spaceship_acceleration">
                                        </div>
                                        <div class="param">
                                            <input class="readonly_input" type="text" value="Prędkość max" readonly>
                                            <input class="param" type="text" name="attr_spaceship_max_speed">
                                        </div>
                                        <div class="param">
                                            <input class="readonly_input" type="text" value="Wytrzymałość" readonly>
                                            <input class="param" type="text" name="attr_spaceship_tough">
                                        </div>
                                        <!--Wybór jakości-->
                                        <div class="param">
                                            <input class="readonly_input" type="text" value="Rzadkość" readonly>
                                            <select class="sheet-quality-select" name="attr_spaceship_quality"
                                                value="-">
                                                <option value="-">-</option>
                                                <option value="common">Zwykła</option>
                                                <option value="uncommon">Niezwykła</option>
                                                <option value="rare">Rzadka</option>
                                                <option value="legend">Legendarna</option>
                                                <option value="exotic">Egzotyczna</option>
                                            </select>
                                        </div>
                                    </div>
                                    <div class="right_part">
                                        <h4>Opis</h4>
                                        <div class="param">
                                            <input class="readonly_input" type="text" value="Broń podstawowa" readonly>
                                            <input class="param" type="text" name="attr_spaceship_weapon_damage">
                                            <input class="param" type="text"
                                                name="attr_spaceship_weapon_armor_penetration">
                                        </div>
                                        <div class="param">
                                            <input class="readonly_input" type="text" value="Modyfikacje" readonly>
                                            <input class="spaceship_mod1" type="text" name="attr_spaceship_mod1">
                                            <input class="spaceship_mod2" type="text" name="attr_spaceship_mod2">
                                        </div>
                                        <div class="param">
                                            <input class="readonly_input" type="text" value="Dodatkowy ekwipunek"
                                                readonly>
                                            <textarea class="small_ta" name="attr_spaceship_eq"></textarea>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                        <!--Karta wróbla-->
                        <div class="sparrow-card">
                            <!--Wyciągnięcie zmiennej, aby mogła zmieniać tło-->
                            <input name="attr_sparrow_quality" type="hidden" class="sheet-sparrow-quality-switch">
                            <div class="sheet-sparrow-card">
                                <div class="upper_line">
                                    <!--Nazwa-->
                                    <div class="param">
                                        <input class="param_long" type="text" name="attr_sparrow_name" value="">
                                    </div>
                                    <!--Polę na grafikę statku-->
                                    <div class="image_div">
                                        <img class="icon-sparrow">
                                    </div>
                                </div>
                                <div class="lower_line">
                                    <div class="left_part">
                                        <div class="param">
                                            <h4>Statystyki</h4>
                                        </div>
                                        <!--Parametry statku-->
                                        <div class="param">
                                            <input class="readonly_input" type="text" value="Przyspieszenie" readonly>
                                            <input class="param" type="text" name="attr_sparrow_acceleration">
                                        </div>
                                        <div class="param">
                                            <input class="readonly_input" type="text" value="Prędkość max" readonly>
                                            <input class="param" type="text" name="attr_sparrow_max_speed">
                                        </div>
                                        <div class="param">
                                            <input class="readonly_input" type="text" value="Wytrzymałość" readonly>
                                            <input class="param" type="text" name="attr_sparrow_tough">
                                        </div>
                                        <div class="param">
                                            <input class="readonly_input" type="text" value="Pojemność D." readonly>
                                            <input class="param" type="text" name="attr_sparrow_nitro">
                                        </div>
                                        <div class="param">
                                            <input class="readonly_input" type="text" value="Regeneracja D." readonly>
                                            <input class="param" type="text" name="attr_sparrow_nitro_reg">
                                        </div>
                                        <!--Wybór jakości-->
                                        <div class="param" id="sparrow-quality">
                                            <input class="readonly_input" type="text" value="Rzadkość" readonly>
                                            <select class="sheet-quality-select" name="attr_sparrow_quality" value="-">
                                                <option value="-">-</option>
                                                <option value="common">Zwykła</option>
                                                <option value="uncommon">Niezwykła</option>
                                                <option value="rare">Rzadka</option>
                                                <option value="legend">Legendarna</option>
                                                <option value="exotic">Egzotyczna</option>
                                            </select>
                                        </div>
                                    </div>
                                    <div class="right_part">
                                        <h4>Opis</h4>
                                        <div class="param">
                                            <input class="readonly_input" type="text" value="Modyfikacje" readonly>
                                            <input class="sparrow_mod1" type="text" name="attr_sparrow_mod1">
                                            <input class="sparrow_mod2" type="text" name="attr_sparrow_mod2">
                                            <input class="sparrow_mod3" type="text" name="attr_sparrow_mod3">
                                        </div>
                                        <div class="param">
                                            <input class="readonly_input" type="text" value="Dodatkowy ekwipunek"
                                                readonly>
                                            <textarea class="small_ta" name="attr_sparrow_eq"></textarea>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
                <button type="action" class="change-eq-button" name="act_changeeq">Zaekwipuj</button>
            </fieldset>

        </div>
    </div>

</div>
<!--Strona na pozostałe szczegóły-->
<div class="sheet-details">
    <!--Podsumowanie cech pancerza-->

    <div class="sector" id="armor_summary">
        <h3>Statystyki opancerzenia</h3>
        <div class="sub_sector">
            <div class="sector_col">
                Mobilność<input name="attr_mobility" readonly>
                Defensywa<input name="attr_defence" readonly>
                Regeneracja<input name="attr_regeneration" readonly>
                Dyscyplina<input name="attr_discipline" readonly>
                Inteligencja<input name="attr_inteligence" readonly>
                Krzepa<input name="attr_strong" readonly>
            </div>
            <div class="sector_col">
                Tempo<input name="attr_armor_bonus_speed" value="0" readonly>
                Ruch<input name="attr_armor_bonus_move" value="0" readonly>
                Regeneracja<input name="attr_armor_regeneration_dice" value="d4" readonly>
                Tarcze<input name="attr_armor_bonus_shield" value="0" readonly>
                Wytrzymałość<input name="attr_armor_bonus_tough" value="0" readonly>
                Koszt granatu<input name="attr_armor_bonus_granade_cost" value="0" readonly>
            </div>
            <div class="sector_col">
                Obr. granatu<input name="attr_armor_bonus_granade_damage" value="0" readonly>
                Koszt superzdolności<input name="attr_armor_bonus_super_cost" value="0" readonly>
                Obr. superzdolności<input name="attr_armor_bonus_super_damage" value="0" readonly>
                Zasięg superzdolności<input name="attr_armor_bonus_super_range" value="0/0/0" readonly>
                Koszt silnego ciosu<input name="attr_armor_bonus_melee_cost" value="0" readonly>
                Obr. silnego ciosu<input name="attr_armor_bonus_melee_damage" value="0" readonly>
            </div>
        </div>
    </div>
    <!--Opis postaci-->
    <div class="sector">
        <h3>Opis postaci</h3>
        Opis
        <div class="sub_sector">
            <textarea id="tx_desc" name="attr_description"></textarea>
        </div>
        Historia
        <div class="sub_sector">
            <textarea id="tx_hist" name="attr_history"></textarea>
        </div>
        Dlaczego zostałeś wskrzeszony?
        <div class="sub_sector">
            <textarea id="tx_res" name="attr_resurection"></textarea>
        </div>
    </div>
    <div class="sector" id="sec_two_part">
        <!--Notatki-->
        <div class="sector" id="sec_notes">
            <h3>Notatki</h3>
            <div class="sub_sector">
                <textarea id="tx_nt" name="attr_notes"></textarea>
            </div>
        </div>
        <!--Opis ducha-->
        <div class="sector" id="sec_ghost">
            <h3>Duch</h3>
            <div class="sub_sector">
                Imię<input type="text" name="attr_ghost_name">
            </div>
            <div class="sub_sector">
                Opis<textarea id="tx_gd" name="attr_ghost_desc"></textarea>
            </div>
            <div class="sub_sector">
                Charakter<input type="text" name="attr_ghost_nature1">
            </div>
            <div class="center_sub_sector">
                <input type="text" name="attr_ghost_nature2">
            </div>
            <div class="sub_sector">
                Rany<input class="short_input" type="text" name="attr_ghost_wounds">
            </div>
            <div class="sub_sector">
                Wytrzymałość<input class="short_input" type="text" name="attr_ghost_tough">
            </div>
            <div class="sub_sector">
                Baza danych<select class="short_select" name="attr_data_base" value="d4">
                    <option value="d4">k4</option>
                    <option value="d6">k6</option>
                    <option value="d8">k8</option>
                    <option value="d10">k10</option>
                    <option value="d12">k12</option>
                </select>
                <input type="hidden" name="attr_data_base_mod" value="0">
                <button type="action" class="roll_button" name="act_roll_data_base"></button><br>
            </div>
            <div class="sub_sector">
                Łączność<select class="short_select" name="attr_connection" value="d4">
                    <option value="d4">k4</option>
                    <option value="d6">k6</option>
                    <option value="d8">k8</option>
                    <option value="d10">k10</option>
                    <option value="d12">k12</option>
                </select>
                <input type="hidden" name="attr_connection_mod" value="0">
                <button type="action" class="roll_button" name="act_roll_connection"></button><br>
            </div>
            <div class="sub_sector">
                Skanowanie<select class="short_select" name="attr_scan" value="d4">
                    <option value="d4">k4</option>
                    <option value="d6">k6</option>
                    <option value="d8">k8</option>
                    <option value="d10">k10</option>
                    <option value="d12">k12</option>
                </select>
                <input type="hidden" name="attr_scan_mod" value="0">
                <button type="action" class="roll_button" name="act_roll_scan"></button><br>
            </div>
            <input type="hidden" name="attr_ghost_figure" value="0">
            <!--Przewagi Ducha-->
            <div id="ghost_Advances" class="inner_sector">
                <h3>Przewagi</h3>
                <div class="sub_sector">
                    <div>
                        <fieldset class="repeating_gadvantage">
                            <div class="sub_sector">
                                Nazwa<input type="text" name="attr_gadvname"><br>
                            </div>
                            <div class="sub_sector">
                                Wymagania
                            </div>
                            <div class="sub_sector">
                                <input type="text" name="attr_gadvreq"><br>
                            </div>
                            <details>
                                Opis<br><textarea class="extending_desc" name="attr_gadvdiscDetails"></textarea>
                            </details>
                        </fieldset>
                    </div>
                </div>
            </div>
        </div>
    </div>
    <!--Atrybuty Debug-->
    <input type="number" name="attr_EXP">
    <input type="text" name="attr_DEBUG">
    <input type="text" name="attr_DEBUG2">
    <input type="text" name="attr_DEBUG3">
</div>

<rolltemplate class="sheet-rolltemplate-None">
</rolltemplate>

<rolltemplate class="sheet-rolltemplate-basicDiceRoll">
    <div class="sheet-template-container">
        <div class="sheet-template-header">{{name}}</div>
        <div class="sheet-results">
            <div class="sheet-template-row">
                <span>Kość główna = {{wynik}}</span>
            </div>
            <div class="sheet-template-row">
                <span>Kość figury = {{pomoc}}</span>
            </div>
            {{#rollGreater() computed::wynik 3}}
            <div class="sheet-template-row-won">
                <span>Test zdany</span>
            </div>
            {{/rollGreater() computed::wynik 3}}
            {{#rollLess() computed::wynik 4}}
            <div class="sheet-template-row-lost">
                <span>Test niezdany</span>
            </div>
            {{/rollLess() computed::wynik 4}}
        </div>
    </div>
</rolltemplate>

<rolltemplate class="sheet-rolltemplate-NoFigureDiceRoll">
    <div class="sheet-template-container">
        <div class="sheet-template-header">{{name}}</div>
        <div class="sheet-results">
            <div class="sheet-template-row">
                <span>Kość główna = {{wynik}}</span>
            </div>
            {{#rollGreater() computed::wynik 3}}
            <div class="sheet-template-row-won">
                <span>Test zdany</span>
            </div>
            {{/rollGreater() computed::wynik 3}}
            {{#rollLess() computed::wynik 4}}
            <div class="sheet-template-row-lost">
                <span>Test niezdany</span>
            </div>
            {{/rollLess() computed::wynik 4}}
        </div>
    </div>
</rolltemplate>

<rolltemplate class="sheet-rolltemplate-Attack">
    <div class="sheet-template-container">
        <div class="sheet-template-header">{{name}}</div>
        <div class="sheet-results">
            <div class="sheet-template-row">
                <span>Kość główna = {{wynik}}</span>
            </div>
            <div class="sheet-template-row">
                <span>Kość figury = {{pomoc}}</span>
            </div>
            {{#rollGreater() computed::wynik 3}}
            <div class="sheet-template-row-won">
                <h3>Trafienie!</h3>
                <div class="sheet-template-row">
                    <span>Obrażenia = {{Obr}}</span>
                </div>
                <div class="sheet-template-row">
                    <span>Kość figury = {{FObr}}</span>
                </div>
            </div>
            {{/rollGreater() computed::wynik 3}}
            {{#rollLess() computed::wynik 4}}
            <div class="sheet-template-row-lost">
                <h3>Pudło!</h3>
            </div>
            {{/rollLess() computed::wynik 4}}
        </div>
    </div>
</rolltemplate>

<script type="text/worker">
    //Przełączanie się między stronami
    const buttonlist = ["main","equipment","details"];
    buttonlist.forEach(button => {
        on(`clicked:${button}`, function() {
            setAttrs({
                sheetTab: button
            });
        });
    });

    //Walidacja podklasy
    on("change:subclass", function(){
        getAttrs(["class","subclass"], function(values){
            var clas=values.class;    
            var sub_clas=values.subclass;
            if(clas == "Tytan"){
                if(sub_clas!="Słoneczny pogromca" && sub_clas!="Szturmowiec" && sub_clas!="Wartownik"){
                    setAttrs({subclass: "-"});
                }
            }else if(clas =="Łowca"){
                if(sub_clas!="Strzelec" && sub_clas!="Gromodzierżca" && sub_clas!="Tropiciel"){
                    setAttrs({subclass: "-"});
                }
            }else if(clas == "Czarownik"){
                if(sub_clas!="Ostrze świtu" && sub_clas!="Kroczący przez próżnię" && sub_clas!="Siewca burz"){
                    setAttrs({subclass: "-"});
                }
            }
        })
    })

    //Zmiana liczby doświadczenia
    on("change:EXP", function(){
        getAttrs(["EXP","level"], function(values){
            var exp=values.EXP;
            //Pierw ile expa brakuje, dalej jaki level
            setAttrs({
                EXP_To_Next_Level:exp%5,
                level: parseInt(exp/5)
            });
            var lv=values.level;
            if(lv<9){
                setAttrs({rank: "Nowicjusz"});
            }else if(lv<17){
                setAttrs({rank: "Doświadczony"});
            }else if(lv<25){
                setAttrs({rank: "Weteran"});
            }else if(lv<33){
                setAttrs({rank: "Heros"});
            }else{
                setAttrs({rank: "Legenda"});
            }
        })
    })

    //Usuwa przedrostek z nazwy kości
    function dice_max_value(dice){
        var value=dice.slice(1)
        return value!=""?value:0
    }

    //Sprawdzanie czy rasa Przebudzonych ma odpowiednią wartość ducha
    on("change:spirit change:race",function(){
        getAttrs(["spirit","race"],function(values){
            var race=values.race
            var spirit=values.spirit
            if(race=="Przebudzony" && spirit=="d4"){
                setAttrs({spirit: "d6"})
            }
        })
    })

    //Sprawdzanie czy aktualna wartość fuksów nie jest za duża
    on("change:luck",function(){
        getAttrs(["luck_max","luck"],function(values){
            var max_luck=values.luck_max
            var luck=values.luck
            if(luck<0){
                setAttrs({luck: 0}) 
            }else if(luck>max_luck){
                setAttrs({luck: max_luck}) 
            }
        })
    })

    //Obliczanie wytrzymałości
    on("change:vigor change:tough_mod", function(){
        getAttrs(["vigor","tough_mod","size"], function(values){
            var vigor=parseInt(dice_max_value(values.vigor))    //Parsowanie
            var tm=parseInt(values.tough_mod)
            var size=parseInt(values.size)

            vigor=vigor/2+tm+size+2                             //Dodanie modyfikatorów
            setAttrs({tough: vigor})                            //ustawienie wytrzymałości
        })
    })

    //Obliczanie obrony
    on("change:brawl change:parry_mod", function(){
        getAttrs(["brawl","parry_mod"], function(values){
            var parry=parseInt(dice_max_value(values.brawl))    //Parsowanie
            var pm=parseInt(values.parry_mod)

            parry=parry/2+pm+2                                  //Dodanie modyfikatorów
            setAttrs({parry: parry})                            //ustawienie wytrzymałości
        })
    })

    //Funkcja służąca do podpinania rzutu do przycisku
    function bind_roll(attribute_name,attribute){
        var query="&{template:basicDiceRoll} "                                                          //Szablon rzutu
        query=query.concat("{{name=@{name} wykonuje test "+attribute_name+"}} ")                        //Nazwa rzutu

        getAttrs([attribute], function(values){
            var atr=values[attribute]
            //Sprawdzenie czy umiejętność jest wykupiona
            if(atr!="-"){
                query=query.concat("{{wynik=[[@{"+attribute+"}! +@{"+attribute+"_mod} +?{Modyfikator|0}]]}} ")    //Rzut kością główną
                query=query.concat("{{pomoc=[[d6! +@{"+attribute+"_mod} +?{Modyfikator|0}]]}}")                   //Rzut kością figury
            }else{
                query=query.concat("{{wynik=[[d4!-2 +@{"+attribute+"_mod} +?{Modyfikator|0}]]}}")             //Rzut kością główną
                query=query.concat("{{pomoc=[[d6!-2 +@{"+attribute+"_mod} +?{Modyfikator|0}]]}}")             //Rzut kością figury
            }

            startRoll(query, (results) => {
                var basicDice = results.results.wynik.result    //Kość główna
                var figDice = results.results.pomoc.result      //Kość figury
                var resDice                                     //Kość wyniku
                //Jeśli kość główna nie jest równa jeden i figury jest większa, to zamień
                if(basicDice>1 && figDice>basicDice){
                    resDice=figDice
                }else{
                    resDice=basicDice
                }
                finishRoll(
                    results.rollId,
                    {
                        wynik: resDice
                    }
                )
            })
        })
    }

    //Funkcja służąca do podpinania rzutu do przycisku dla dodanych umiejętności
    function bind_roll_new(attribute_name,attribute){
        attribute_name="repeating_newskill_"+attribute_name         //Nazwa umiejętności
        attribute="repeating_newskill_"+attribute                   //Wartość umiejętności
        attribute_mod=attribute+"mod"                               //Modyfikator umiejętności
        var query="&{template:basicDiceRoll} "                      //Szablon rzutu

        getAttrs([attribute,attribute_name,attribute_mod], function(values){
            var name=values[attribute_name]             //Nazwa umiejętności
            var atr=values[attribute]                   //Wartość umiejętności
            var mod=values[attribute_mod]               //Modyfikator umiejętności
            query=query.concat("{{name=@{name} wykonuje test "+name+"}} ")                        //Nazwa rzutu
            //Sprawdzenie czy umiejętność jest wykupiona
            if(atr!="-"){             
                query=query.concat("{{wynik=[["+atr+"! +"+mod+" +?{Modyfikator|0}]]}}")          //Rzut kością główną
                query=query.concat("{{pomoc=[[d6! +"+mod+" +?{Modyfikator|0}]]}}")               //Rzut kością figury
            }else{
                query=query.concat("{{wynik=[[d4!-2 +"+mod+" +?{Modyfikator|0}]]}}")             //Rzut kością główną
                query=query.concat("{{pomoc=[[d6!-2 +"+mod+" +?{Modyfikator|0}]]}}")             //Rzut kością figury
            }
    
            startRoll(query, (results) => {
                var basicDice = results.results.wynik.result    //Kość główna
                var figDice = results.results.pomoc.result      //Kość figury
                var resDice                                     //Kość wyniku
    
                //Jeśli kość główna nie jest równa jeden i figury jest większa, to zamień
                if(basicDice>1 && figDice>basicDice){
                    resDice=figDice
                }else{
                    resDice=basicDice
                }
                finishRoll(
                    results.rollId,
                    {
                        wynik: resDice
                    }
                )
            })
        })
    }

    //Funkcja służąca do podpinania rzutu dla umiejętności ducha
    function bind_roll_ghost(attribute_name,attribute){
        getAttrs([attribute,"ghost_figure"], function(values){
            if(!values.ghost_figure){
                bind_roll(attribute_name,attribute)                         //Jeśli figura, to potraktuj jak umiejętnośc gracza
                return
            }
            var query="&{template:NoFigureDiceRoll} "                                                      //Szablon rzutu
            query=query.concat("{{name=@{name} wykonuje test "+attribute_name+"}} ")                        //Nazwa rzutu
            var atr=values[attribute]
            query=query.concat("{{wynik=[[@{"+attribute+"}! +@{"+attribute+"_mod} +?{Modyfikator|0}]]}} ")    //Rzut kością główną

            startRoll(query, (results) => {
                var basicDice = results.results.wynik.result    //Kość główna
                finishRoll(
                results.rollId,
                    {
                        wynik: basicDice
                    }
                )
            })
        })
    }

    //Przypisanie rzutów do cech
    on('clicked:roll_strength', (info) => {
        bind_roll("siły","strength")
    })

    on('clicked:roll_agility', (info) => {
        bind_roll("zręczności","agility")
    })

    on('clicked:roll_smart', (info) => {
        bind_roll("sprytu","smart")
    })

    on('clicked:roll_spirit', (info) => {
        bind_roll("ducha","spirit")
    })

    on('clicked:roll_vigor', (info) => {
        bind_roll("wigoru","vigor")
    })

    //Przypisanie rzutów do umiejętności
    on('clicked:roll_gamble', (info) => {
        bind_roll("hazardu","gamble")
    })

    on('clicked:roll_survival', (info) => {
        bind_roll("przetrwania","survival")
    })
    
    on('clicked:roll_repair', (info) => {
        bind_roll("reperowania","repair")
    })

    on('clicked:roll_spot', (info) => {
        bind_roll("spostrzegawczości","spot")
    })

    on('clicked:roll_tracking', (info) => {
        bind_roll("tropienia","tracking")
    })

    on('clicked:roll_search', (info) => {
        bind_roll("wyszukiwania","search")
    })

    on('clicked:roll_ridicule', (info) => {
        bind_roll("wyśmiewania","ridicule")
    })

    on('clicked:roll_pilotage', (info) => {
        bind_roll("pilotowania","pilotage")
    })

    on('clicked:roll_drive', (info) => {
        bind_roll("prowadzenia","drive")
    })

    on('clicked:roll_move', (info) => {
        bind_roll("ruchu","move")
    })

    on('clicked:roll_throw', (info) => {
        bind_roll("rzucania","throw")
    })

    on('clicked:roll_stealth', (info) => {
        bind_roll("skradania się","stealth")
    })

    on('clicked:roll_shoot', (info) => {
        bind_roll("strzelania","shoot")
    })

    on('clicked:roll_brawl', (info) => {
        bind_roll("walki wręcz","brawl")
    })

    on('clicked:roll_breaking', (info) => {
        bind_roll("włamywania się","breaking")
    })

    on('clicked:roll_persuade', (info) => {
        bind_roll("przekonywania","persuade")
    })

    on('clicked:roll_intimidate', (info) => {
        bind_roll("zastraszania","intimidate")
    })

    //Umiejętności dodatkowe
    on('clicked:repeating_newskill:rollns', (info) => {
        bind_roll_new("nsname","nsvalue")
    })

    //Umiejętności ducha
    on('clicked:roll_data_base', (info) => {
        bind_roll_ghost("bazy danych","data_base")
    })

    on('clicked:roll_connection', (info) => {
        bind_roll_ghost("łączności","connection")
    })

    on('clicked:roll_scan', (info) => {
        bind_roll_ghost("skanowania","scan")
    })

    /*
    #############################
    ######Sumowanie bonusów######
    #############################
    */

    on("change:armor_bonus_speed",function(){
        getAttrs(["armor_bonus_speed"],(values)=>{
            //6 to minimum
            sped=parseInt(values.armor_bonus_speed)+6
            setAttrs({
                "speed":sped
            })
        })
    })

    on("change:armor_bonus_move",function(){
        getAttrs(["armor_bonus_move"],(values)=>{
            move_b=parseInt(values.armor_bonus_move) //Odczytanie i zsumowanie wyników
            setAttrs({
                "move_mod":move_b
            })
        })
    })

    on("change:armor_bonus_tough",function(){
        getAttrs(["armor_bonus_tough"],(values)=>{
            tough_b=parseInt(values.armor_bonus_tough) //Odczytanie i zsumowanie wyników
            setAttrs({
                "tough_mod":tough_b
            })
        })
    })

    /*
    #############################
    ############Życie############
    #############################
    */    
    
    //Zmienianie maksymalnej wartości tarcz
    on("change:armor_bonus_shield", function(){
        getAttrs(["armor_bonus_shield"],(values)=>{
            setAttrs({
                "max_barrier": 3+parseInt(values.armor_bonus_shield)
            })
        })
    })

    //Zmienianie obecnej wartości życia
    on("change:max_barrier", function(){
        getAttrs(["max_barrier","actual_health"],(values)=>{
            var max=values.max_barrier
            if(values.actual_health>max+2){
                setAttrs({
                    "actual_health": max+2
                })
            }
        })
    })

    //Walidacja wyświetlania się komórek
    on("change:health_death change:health_wound change:health_barrier1 change:health_barrier2 change:health_barrier3 change:health_barrier4 change:health_barrier5 change:health_barrier6", function(){
        const healthBar=["health_death", "health_wound", "health_barrier1", "health_barrier2","health_barrier3","health_barrier4", "health_barrier5","health_barrier6"]
        getAttrs(["health_death", "health_wound", "health_barrier1", "health_barrier2","health_barrier3","health_barrier4", "health_barrier5","health_barrier6","max_barrier"],(values)=>{
            //Liczba tarcz plus rana i śmierć
            var counter=values.max_barrier+2-1
            while(values[healthBar[counter]]=="0" && counter>=0){
                counter=counter-1
            }
            setAttrs({
                "actual_health": counter+1
            })
            let i
            for(i=counter;i>=0;i--){
                setAttrs({
                    [healthBar[i]]: "on"
                })
            }
        })
    })

    //Wyświetlanie poprawnej liczby komórek życia
    on("change:actual_health", function(){
        const healthBar=["health_death", "health_wound", "health_barrier1", "health_barrier2","health_barrier3","health_barrier4", "health_barrier5","health_barrier6"]
        //0->Wszystkie pola odznaczone, 1->pierwsze pole zaznaczone itd.
        getAttrs(["actual_health"],(values)=>{
            //Liczba tarcz plus rana i śmierć
            var counter=values.actual_health
            let i
            for(i=0;i<counter;i++){
                setAttrs({
                    [healthBar[i]]: "on"
                })
            }
            for(i;i<healthBar.length;i++){
                setAttrs({
                    [healthBar[i]]: 0
                })
            }
        })
    })

    //Rzut na regeneracje
    on('clicked:roll_regeneration', (info) => {
        var query="&{template:basicDiceRoll} "                                                          //Szablon rzutu
        query=query.concat("{{name=@{name} wykonuje test Regeneracji}} ")                        //Nazwa rzutu
        attribute="armor_regeneration_dice"

        getAttrs([attribute,"actual_health","max_barrier"], function(values){
            var atr=values[attribute]
            //Sprawdzenie czy umiejętność jest wykupiona
            if(atr!="-"){
                query=query.concat("{{wynik=[[@{"+attribute+"}! +?{Modyfikator|0}]]}} ")    //Rzut kością główną
                query=query.concat("{{pomoc=[[d6! +?{Modyfikator|0}]]}}")                   //Rzut kością figury
            }else{
                query=query.concat("{{wynik=[[d4!-2 +?{Modyfikator|0}]]}}")             //Rzut kością główną
                query=query.concat("{{pomoc=[[d6!-2 +?{Modyfikator|0}]]}}")             //Rzut kością figury
            }

            startRoll(query, (results) => {
                var basicDice = results.results.wynik.result    //Kość główna
                var figDice = results.results.pomoc.result      //Kość figury
                var resDice                                     //Kość wyniku
                //Jeśli kość główna nie jest równa jeden i figury jest większa, to zamień
                if(basicDice>1 && figDice>basicDice){
                    resDice=figDice
                }else{
                    resDice=basicDice
                }
                //Regeneracja
                let barrier=parseInt(resDice/4)
                if(barrier>0){
                    let health=values.actual_health
                    let max=values.max_barrier+2
                    setAttrs({
                        "actual_health": health+barrier>max?max:health+barrier
                    })
                }

                finishRoll(
                    results.rollId,
                    {
                        wynik: resDice
                    }
                )
            })
        })
    })

    //Rzut na wyjście z szoku
    on('clicked:roll_unshock', (info) => {
        var query="&{template:basicDiceRoll} "                                                          //Szablon rzutu
        query=query.concat("{{name=@{name} wykonuje test na wyjście z szoku}} ")                        //Nazwa rzutu
        attribute="spirit"

        getAttrs([attribute], function(values){
            var atr=values[attribute]
            //Sprawdzenie czy umiejętność jest wykupiona
            if(atr!="-"){
                query=query.concat("{{wynik=[[@{"+attribute+"}! +@{"+attribute+"_mod} +?{Modyfikator|0}]]}} ")    //Rzut kością główną
                query=query.concat("{{pomoc=[[d6! +@{"+attribute+"_mod} +?{Modyfikator|0}]]}}")                   //Rzut kością figury
            }else{
                query=query.concat("{{wynik=[[d4!-2 +@{"+attribute+"_mod} +?{Modyfikator|0}]]}}")             //Rzut kością główną
                query=query.concat("{{pomoc=[[d6!-2 +@{"+attribute+"_mod} +?{Modyfikator|0}]]}}")             //Rzut kością figury
            }

            startRoll(query, (results) => {
                var basicDice = results.results.wynik.result    //Kość główna
                var figDice = results.results.pomoc.result      //Kość figury
                var resDice                                     //Kość wyniku
                //Jeśli kość główna nie jest równa jeden i figury jest większa, to zamień
                if(basicDice>1 && figDice>basicDice){
                    resDice=figDice
                }else{
                    resDice=basicDice
                }
                if(resDice>=4){
                    setAttrs({
                        "health_shock": "on"
                    })
                }
                finishRoll(
                    results.rollId,
                    {
                        wynik: resDice
                    }
                )
            })
        })
    })

    /*
    #############################
    ##########Ekwipunek##########
    #############################
    */

    //Typowe bronie
    const gun_atr=["Obrażenia","Zasięg","Stabilność","Szybkostrzelność","Magazynek","Przeładowanie","Dobycie"]
    const guns=["Hand_cannon","Auto_rifle","Scout_rifle","Pulse_rifle","Sidearm","Smg","Shotgun","Sniper_rifle","Fusion_rifle","Machine_rifle","Line_rifle"]
    
    const bows=["Obrażenia","Zasięg", "Stabilność", "Szybkostrzelność", "Pełny naciąg", "Bonus za celowanie", "Dobycie"]
    const light_g=["Obrażenia","Zasięg", "Stabilność","Szybkostrzelność", "Promień wybuchu", "Elastyczność", "Dobycie"]
    const rocket_l=["Obrażenia","Zasięg", "Naprowadzanie", "Promień wybuchu", "Magazynek", "Przeładowanie","Dobycie"]
    const granade_l=["Obrażenia","Zasięg", "Stabilność", "Promień wybuchu", "Magazynek", "Przeładowanie","Dobycie"]
    const swords=["Obrażenia","Siła osłony", "Wydajność","Szybkość", "Magazynek", "Zasięg tąpnięcia", "Dobycie"]

    const gun_dict={
        Hand_cannon: gun_atr,
        Auto_rifle: gun_atr,
        Scout_rifle: gun_atr,
        Pulse_rifle: gun_atr,
        Sidearm: gun_atr,
        Smg: gun_atr,
        Shotgun: gun_atr,
        Sniper_rifle: gun_atr,
        Fusion_rifle: gun_atr,
        Machine_rifle: gun_atr,
        Line_rifle: gun_atr,
        //Bronie o nietypowej charakterystyce
        Bow: bows,
        Light_grnd: light_g,
        Sword: swords,
        Granade_launcher: granade_l,
        Rocket_launcher: rocket_l
    }
    //Ustawienie parametrów zależnie od typu broni
    on("change:kinetic_type", function(){
        getAttrs(["kinetic_type"], function(values){
            var type=values.kinetic_type
            var parameters=gun_dict[type]
            setAttrs({
                kinetic_param_name_1: parameters[0],
                kinetic_param_name_2: parameters[1],
                kinetic_param_name_3: parameters[2],
                kinetic_param_name_4: parameters[3],
                kinetic_param_name_5: parameters[4],
                kinetic_param_name_6: parameters[5],
                kinetic_param_name_7: parameters[6]
            })
        })
    })

    on("change:special_type", function(){
        getAttrs(["special_type"], function(values){
            var type=values.special_type
            var parameters=gun_dict[type]
            setAttrs({
                special_param_name_1: parameters[0],
                special_param_name_2: parameters[1],
                special_param_name_3: parameters[2],
                special_param_name_4: parameters[3],
                special_param_name_5: parameters[4],
                special_param_name_6: parameters[5],
                special_param_name_7: parameters[6]
            })
        })
    })

    on("change:heavy_type", function(){
        getAttrs(["heavy_type"], function(values){
            var type=values.heavy_type
            var parameters=gun_dict[type]
            setAttrs({
                heavy_param_name_1: parameters[0],
                heavy_param_name_2: parameters[1],
                heavy_param_name_3: parameters[2],
                heavy_param_name_4: parameters[3],
                heavy_param_name_5: parameters[4],
                heavy_param_name_6: parameters[5],
                heavy_param_name_7: parameters[6]
            })
        })
    })

    on("change:repeating_card:type", function(){
        getAttrs(["repeating_card_type"], function(values){
            var type=values.repeating_card_type
            var parameters=gun_dict[type]
            setAttrs({
                repeating_card_param_name_1: parameters[0],
                repeating_card_param_name_2: parameters[1],
                repeating_card_param_name_3: parameters[2],
                repeating_card_param_name_4: parameters[3],
                repeating_card_param_name_5: parameters[4],
                repeating_card_param_name_6: parameters[5],
                repeating_card_param_name_7: parameters[6]
            })
        })
    })

    //Kontrola amunicji
    //Zmiana na wskutek zmiany żetonów
    function amno_in_gun(weap_type,current_amno,mag_size,amno_type){
        getAttrs([weap_type,current_amno,mag_size,amno_type], function(values){
            var w_type=values[weap_type]                                    //Typ broni
            var amno=parseInt(values[current_amno])                         //Obecna liczba naboi w magazynku
            var amno_pack=parseInt(values[amno_type])                       //Liczba żetonów amunicji
            var mag=parseInt(values[mag_size])                              //param5    //Wielkość magazynka

            if(w_type=="Sword"){
                let amno_pack_size=mag/5                                    //Wielkość paczki z amunicją
                let rest=amno%amno_pack_size                                //Ile nabojów zostało poza paczkami
                let curr_amno=amno_pack*amno_pack_size+rest                 //Ile nabojów jest obecnie dostępnych
                curr_amno=curr_amno>mag?mag:curr_amno                       //Czy nie przekroczono limitu?
                setAttrs({
                    [current_amno]:curr_amno                                //Podstawienie wartości pod atrybut
                })
            }else if(w_type=="Light_grnd"){
                let rest_amno=Math.floor(amno/2)                            //Ile całych paczek zostało
                let rest=amno%2                                             //Ile nabojów zostało poza paczkami
                let curr_amno=amno_pack*2+rest
                curr_amno=curr_amno>20?20:curr_amno                         //Ile nabojów jest obecnie dostępnych
                setAttrs({
                    [current_amno]:curr_amno  
                })
            }else if(w_type=="Bow"){
                let rest=amno%6                                             //Ile nabojów zostało poza paczkami
                let curr_amno=amno_pack*6+rest
                curr_amno=curr_amno>60?60:curr_amno                         //Ile nabojów jest obecnie dostępnych
                setAttrs({
                    [current_amno]:curr_amno  
                })
            }
        }) 
    }

    //Zmiana na wskutek zmiany amunicji
    function amno_in_backpack(weap_type,current_amno,mag_size,amno_type){
        getAttrs([weap_type,current_amno,mag_size], function(values){
            var w_type=values[weap_type]                                    //Typ broni
            var amno=parseInt(values[current_amno])                         //Obecna liczba naboi w magazynku
            var mag=parseInt(values[mag_size])                              //param5    //Wielkość magazynka

            if(w_type=="Sword"){
                let amno_pack_size=mag/5                                    //Wielkość paczki z amunicją
                let rest_pack=Math.floor(amno/amno_pack_size)                 //Ile paczek zostało?
                setAttrs({
                    [amno_type]: rest_pack                              
                })
            }else if(w_type=="Light_grnd"){
                let rest_pack=Math.floor(amno/2)                            //Ile całych paczek zostało
                setAttrs({
                    [amno_type]: rest_pack                              
                })
            }else if(w_type=="Bow"){
                let rest_pack=Math.floor(amno/6)                            //Ile całych paczek zostało
                setAttrs({
                    [amno_type]: rest_pack                              
                })
            }
        }) 
    }

    //Aktualizuję stan amunicji w skrócie
    function amno_status(weap_type,current_amno,mag_size,weap_status){
        getAttrs([weap_type,current_amno,mag_size],function(values){
            var w_type=values[weap_type]                                    //Typ broni
            var amno=parseInt(values[current_amno])                         //Obecna liczba naboi w magazynku
            var mag=parseInt(values[mag_size])                              //param5    //Wielkość magazynka
            var status                                                      //Stan amunicji naboje w magazynku/wielkość magazynku
            if(w_type=="Light_grnd"){
                status=amno+"/"+"20"
            }else if(w_type=="Bow"){
                status=amno+"/"+"60"
            }else{
                status=amno+"/"+mag
            }
            setAttrs({
                [weap_status]: status
            })
        })
    }

    on("change:kinetic_param5 change:kinetic_amno change:kinetic_type",function(){
        amno_in_gun("kinetic_type","kinetic_weapon_current_ammo","kinetic_param5","kinetic_amno")
        amno_status("kinetic_type","kinetic_weapon_current_ammo","kinetic_param5","kinetic_weapon_amno_status")
    })

    on("change:special_param5 change:special_amno change:kinetic_type",function(){
        amno_in_gun("special_type","special_weapon_current_ammo","special_param5","special_amno")
        amno_status("special_type","special_weapon_current_ammo","special_param5","special_weapon_amno_status")
    })

    on("change:heavy_param5 change:heavy_amno change:kinetic_type",function(){
        amno_in_gun("heavy_type","heavy_weapon_current_ammo","heavy_param5","heavy_amno")
        amno_status("heavy_type","heavy_weapon_current_ammo","heavy_param5","heavy_weapon_amno_status")
    })

    on("change:kinetic_param5 change:kinetic_weapon_current_ammo change:kinetic_type",function(){
        amno_in_backpack("kinetic_type","kinetic_weapon_current_ammo","kinetic_param5","kinetic_amno")
        amno_status("kinetic_type","kinetic_weapon_current_ammo","kinetic_param5","kinetic_weapon_amno_status")
    })

    on("change:special_param5 change:special_weapon_current_ammo change:special_type",function(){
        amno_in_backpack("special_type","special_weapon_current_ammo","special_param5","special_amno")
        amno_status("special_type","special_weapon_current_ammo","special_param5","special_weapon_amno_status")
    })

    on("change:heavy_param5 change:heavy_weapon_current_ammo change:heavy_type",function(){
        amno_in_backpack("heavy_type","heavy_weapon_current_ammo","heavy_param5","heavy_amno")
        amno_status("heavy_type","heavy_weapon_current_ammo","heavy_param5","heavy_weapon_amno_status")
    })

    //Maksymalna wartość cechy dla pancerza danej jakości
    const armor_max={
        none: "0",
        common: "2",
        uncommon: "3",
        rare: "4",
        legend: "5",
        exotic: "5"
    }

    //Obsługa pancerza
    function check_armor(atribute,quality){
        getAttrs([atribute,quality],function(values){
            var atr=values[atribute]
            var qual=values[quality]
            //Zamień na wartość ze słownika
            qual=qual=="-"?"none":qual
            //Czy jest puste?
            if(isNaN(atr)){
                setAttrs({
                    [atribute]: "0"
                })
                return
            }
            //Sprawdź jakość
            if(atr>armor_max[qual]){
                //Zmień
                setAttrs({
                    [atribute]: "0"
                })
            }
        })
    }

    //Maksymalna wartość opancerzenie dla danej jakości
    const armor={
        none: "0",
        common: "1",
        uncommon: "2",
        rare: "3",
        legend: "4",
        exotic: "5"
    }
    //Parametry pancerza
    const armor_param=["armor_mobility","armor_defence","armor_regeneration","armor_discipline","armor_inteligence","armor_strong"]

    //Sprawdza parametry jednego elementu pancerza
    function check_fully_armor(part_of_body){
        //Wywołaj spawdzenie dla każdej cechy
        armor_param.forEach(arm =>{
            check_armor(part_of_body+arm,part_of_body+"armor_quality")
        })
        //Sprawdź wartości opancerzenia
        getAttrs([part_of_body+"armor_quality",part_of_body+"armor_value"],function(values){
            var qual_name=part_of_body+"armor_quality"
            var qual=values[qual_name]
            qual=qual=="-"?"none":qual
            var val_name=part_of_body+"armor_value"
            var val=values[val_name]
            //Sprawdź wartość opancerzenia
            if(qual=="common"){
                if(val!="0" && val!="1"){
                    setAttrs({
                        [val_name]: "0"
                    })
                }
            }else{
                if(val!=armor[qual]){
                    setAttrs({
                        [val_name]: armor[qual]
                    })
                }
            }
        })
    }
    //Sumuje wartości statystyk pancerzy
    function sum_armor(stat,clas="-",stat_clas=""){
        var head="head_armor_"+stat
        var hands="hands_armor_"+stat
        var body="body_armor_"+stat
        var legs="legs_armor_"+stat
        getAttrs([head,hands,body,legs,clas],function(values){
            let sum=parseInt(values[head])+parseInt(values[hands])+parseInt(values[body])+parseInt(values[legs])
            if(clas!="-" && stat_clas!="" && values[clas]==stat_clas){
                sum=sum+10
            }
            setAttrs({
                [stat]: sum
            })
        })
    }
    //Bonusy wynikające z pancerza
    speed_bonus=[0,1,2,3,4,5,6]
    move_bonus=[0,0,1,1,2,3,4]
    reg_dice=["d4","d6","d8","d10","d12","d12+2","d12+4"]
    shield_bonus=[0,1,1,2,2,3,3,]
    tough_bonus=[0,0,1,1,2,2,3]
    granade_cost_bonus=[0,-1,-1,-2,-2,-3,-3]
    granade_damage_bonus=[0,0,1,1,2,2,3]
    super_cost_bonus=[0,-1,-2,-2,-3,-3,-4]
    super_damage_bonus=[0,0,1,1,2,2,3]
    super_range_bonus=["0/0/0","0/0/0","1/2/4","1/2/4","2/4/8","2/4/8","3/6/12"]
    melee_cost_bonus=[0,-1,-1,-2,-2,-3,-3]
    melee_damage_bonus=[0,0,1,1,2,2,3]

    //Odczytywanie bonusów z tablic i ustawianie ich
    function armor_bonus_set(stat,bonus,bonus_values){
        getAttrs([stat],function(values){
            var bonus_id=Math.ceil(parseInt(values[stat])/5)
            setAttrs({
                [bonus]: bonus_values[bonus_id]
            })
        })
    }

    //Sprawdź wartości pancerza
    on("change:head_armor_mobility change:head_armor_defence change:head_armor_regeneration change:head_armor_discipline change:head_armor_inteligence change:head_armor_strong change:head_armor_value change:head_armor_quality", function(){
        check_fully_armor("head_")
    })

    on("change:hands_armor_mobility change:hands_armor_defence change:hands_armor_regeneration change:hands_armor_discipline change:hands_armor_inteligence change:hands_armor_strong change:hands_armor_value change:hands_armor_quality", function(){
        check_fully_armor("hands_")
    })

    on("change:body_armor_mobility change:body_armor_defence change:body_armor_regeneration change:body_armor_discipline change:body_armor_inteligence change:body_armor_strong change:body_armor_value change:body_armor_quality", function(){
        check_fully_armor("body_")
    })

    on("change:legs_armor_mobility change:legs_armor_defence change:legs_armor_regeneration change:legs_armor_discipline change:legs_armor_inteligence change:legs_armor_strong change:legs_armor_value change:legs_armor_quality", function(){
        check_fully_armor("legs_")
    })

    on("change:repeating_card:armor_mobility change:repeating_card:armor_defence change:repeating_card:armor_regeneration change:repeating_card:armor_discipline change:repeating_card:armor_inteligence change:repeating_card:armor_strong change:repeating_card:armor_value change:repeating_card:armor_quality", function(){
        check_fully_armor("repeating_card_")
    })

    //Sumowanie wartości
    on("change:class change:head_armor_mobility change:hands_armor_mobility change:body_armor_mobility change:legs_armor_mobility",function(){
        sum_armor("mobility",clas="class",stat_clas="Łowca")
    })

    on("change:class change:head_armor_defence change:hands_armor_defence change:body_armor_defence change:legs_armor_defence",function(){
        sum_armor("defence",clas="class",stat_clas="Tytan")
    })

    on("change:class change:head_armor_regeneration change:hands_armor_regeneration change:body_armor_regeneration change:legs_armor_regeneration",function(){
        sum_armor("regeneration",clas="class",stat_clas="Czarownik")
    })

    on("change:head_armor_discipline change:hands_armor_discipline change:body_armor_discipline change:legs_armor_discipline",function(){
        sum_armor("discipline")
    })

    on("change:head_armor_inteligence change:hands_armor_inteligence change:body_armor_inteligence change:legs_armor_inteligence",function(){
        sum_armor("inteligence")
    })

    on("change:head_armor_strong change:hands_armor_strong change:body_armor_strong change:legs_armor_strong",function(){
        sum_armor("strong")
    })

    //Zmiana bonusów wynikających z pancerza
    on("change:mobility",function(){
        armor_bonus_set("mobility","armor_bonus_speed",speed_bonus)
        armor_bonus_set("mobility","armor_bonus_move",move_bonus)
    })

    on("change:defence",function(){
        armor_bonus_set("defence","armor_bonus_shield",shield_bonus)
        armor_bonus_set("defence","armor_bonus_tough",tough_bonus)
    })

    on("change:regeneration",function(){
        armor_bonus_set("regeneration","armor_regeneration_dice",reg_dice)
    })

    on("change:discipline",function(){
        armor_bonus_set("discipline","armor_bonus_granade_cost",granade_cost_bonus)
        armor_bonus_set("discipline","armor_bonus_granade_damage",granade_damage_bonus)
    })

    on("change:inteligence",function(){
        armor_bonus_set("inteligence","armor_bonus_super_cost",super_cost_bonus)
        armor_bonus_set("inteligence","armor_bonus_super_damage",super_damage_bonus)
        armor_bonus_set("inteligence","armor_bonus_super_range",super_range_bonus)
    })

    on("change:strong",function(){
        armor_bonus_set("strong","armor_bonus_melee_cost",melee_cost_bonus)
        armor_bonus_set("strong","armor_bonus_melee_damage",melee_damage_bonus)
    })

    //Zwielokrotnianie obrażeń przez serię
    function multipy_by_series(damage,series){
        damage=damage.replace(/\s+/g, '')                   //Usunięcie spacji
        var multiply_damage=""                              //Zwielokrotnione obrażenia
        var shots=Math.floor(Math.random() * series + 1)    //Liczba wystrzałów
        var dice_pos=damage.indexOf("d")                    //Pozycja początkowa kości
        var dice_count=parseInt(damage.slice(0,dice_pos))   //Iloma kośmi się rzuca
        //Zwielokrotnienie kości
        if(isNaN(dice_count)){
            multiply_damage=shots
        }else{
            multiply_damage=shots*dice_count
        }
        var dice_end=damage.indexOf("+")                    //Gdzie kończy się zapis kości
        dice_end=(dice_end==-1 ? damage.length : dice_end)
        dice=damage.slice(dice_pos,dice_end)                //Jaką kością się rzuca
        multiply_damage=multiply_damage+""+dice             //Dodanie kości do zapisu
        //Modyfikator
        if(damage.indexOf("+")!=-1){
            bonus=parseInt(damage.slice(dice_end))          //Modyfikator rzutu
            bonus=isNaN(bonus)?0:bonus
            bonus=bonus*shots                               //Zwielokrotnienie modyfikatora
            multiply_damage=multiply_damage+"+"+bonus       //Dodanie modyfikatora do zapisu
        }
        return multiply_damage
    }

    //Funkcja służąca do podpinania ataku
    function bind_atack_roll(attribute_name,attribute,wp_name,damage,curr_amno,series=1){
        var query="&{template:Attack} "                                                                       //Szablon rzutu
        query=query.concat("{{name=@{name} wykonuje atak za pomocą @{"+wp_name+"}}} ")                        //Nazwa rzutu

        getAttrs([attribute,damage,curr_amno], function(values){
            var atr=values[attribute]
            var camno=parseInt(values[curr_amno])      //Obecna amunicja
            //Czy broń jest naładowana?
            if(camno==0){
                throw new Error("Brak amunicji!")
            }else{
                //Odejmij amunicje
                setAttrs({
                    [curr_amno]: camno-series
                })
            }
            //Sprawdzenie czy umiejętność jest wykupiona
            if(atr!="-"){
                query=query.concat("{{wynik=[[@{"+attribute+"}! +@{"+attribute+"_mod} +?{Modyfikator|0}]]}} ")    //Rzut kością główną
                query=query.concat("{{pomoc=[[d6! +@{"+attribute+"_mod} +?{Modyfikator|0}]]}}")                   //Rzut kością figury
            }else{
                query=query.concat("{{wynik=[[d4!-2 +@{"+attribute+"_mod} +?{Modyfikator|0}]]}}")             //Rzut kością główną
                query=query.concat("{{pomoc=[[d6!-2 +@{"+attribute+"_mod} +?{Modyfikator|0}]]}}")             //Rzut kością figury
            }
            //Czy broń atakuję serią
            if(series!=1){
                
                query=query.concat("{{Obr=[["+multipy_by_series(values[damage],series)+"]] }}")
            //Jeśli nie
            }else{
                query=query.concat("{{Obr=[[@{"+damage+"}! ]]}}")
            }
            query=query.concat("{{FObr=[[d6!]]}}")

            startRoll(query, (results) => {
                var basicDice = results.results.wynik.result    //Kość główna
                var figDice = results.results.pomoc.result      //Kość figury
                var resDice                                     //Kość wyniku

                //Jeśli kość główna nie jest równa jeden i figury jest większa, to zamień
                if(basicDice>1 && figDice>basicDice){
                    resDice=figDice
                }else{
                    resDice=basicDice
                }
                finishRoll(
                    results.rollId,
                    {
                        wynik: resDice
                    }
                )
            })
        })
    }

    function bind_atack(weap_type,firerate,weap_name,damage,curr_amno){
        getAttrs([weap_type,firerate],function(values){
            var w_type=values[weap_type]                    //Typ broni
            var rate=values[firerate]                       //Szybkostrzelność
            //Sprawdź typ broni
            if(w_type=="Sword"){                            //Miecz wykorzystuję inny rzut
                bind_atack_roll("walki wręcz","brawl",weap_name,damage,curr_amno)
            }else if(w_type=="Rocket_launcher" || w_type=="Granade_launcher"){                  //Bronie bez cechy szybkostrzelność
                bind_atack_roll("strzelania","shoot",weap_name,damage,curr_amno)
            }else{
                //Sprawdzenie czy broń strzela serią
                if(rate[0]=='s'){
                    bind_atack_roll("strzelania","shoot",weap_name,damage,curr_amno,series=parseInt(rate.slice(1)))
                }else{
                    bind_atack_roll("strzelania","shoot",weap_name,damage,curr_amno)
                }
            }
        })
    }

    function bind_melee(){
        var damage="melee_damage"         
        var attribute="brawl"
        var wp_name="melee_name"

        var query="&{template:Attack} "                                                                       //Szablon rzutu
        query=query.concat("{{name=@{name} wykonuje atak za pomocą @{"+wp_name+"}}} ")                        //Nazwa rzutu

        query=query.concat("{{wynik=[[@{"+attribute+"}! +@{"+attribute+"_mod} +?{Modyfikator|0}]]}} ")    //Rzut kością główną
        query=query.concat("{{pomoc=[[d6! +@{"+attribute+"_mod} +?{Modyfikator|0}]]}}")                  //Rzut kością figury

        query=query.concat("{{Obr=[[@{"+damage+"}! ]]}}")
        query=query.concat("{{FObr=[[d6!]]}}")
    
        startRoll(query, (results) => {
            var basicDice = results.results.wynik.result    //Kość główna
            var figDice = results.results.pomoc.result      //Kość figury
            var resDice                                     //Kość wyniku
    
            //Jeśli kość główna nie jest równa jeden i figury jest większa, to zamień
            if(basicDice>1 && figDice>basicDice){
                resDice=figDice
            }else{
                resDice=basicDice
            }
            finishRoll(
                results.rollId,
                {
                    wynik: resDice
                }
            )
        })
    }

    //Obliczanie obrażeń walki wręcz
    on("change:strength change:strength_mod", function(){
        getAttrs(["strength","strength_mod"], function(values){
            var str=values.strength
            var strm=values.strength_mod
            var melee_dmg=str+"!+d4!+"+strm

            setAttrs({melee_damage: melee_dmg})
        })
    })

    function bind_reload(weap_type,curr_amno,mag_size,amno_type){
        getAttrs([weap_type,curr_amno,amno_type,mag_size],function(values){
            var w_type=values[weap_type]      //Typ broni
            //Broni któych się nie przeładowuje lub nie mają magazynka
            if(w_type=="Sword" || w_type=="Light_grnd" || w_type=="Bow"){
                return
            }
            //1 żeton=1 magazynek
            if(w_type=="Hand_cannon" || w_type=="Auto_rifle" || w_type=="Scout_rifle" || w_type=="Pulse_rifle" || w_type=="Sidearm" || w_type=="Smg"){
                var amno=parseInt(values[amno_type])                     //Ile żetonów pozostało
                var max=parseInt(values[mag_size])                   //Wielkość magazynka
                var camno=parseInt(values[curr_amno])    //Obecna amunicja
                //Zmień wartość amunicji
                if(amno!=0  && camno!=max){
                    setAttrs({
                        [curr_amno]: max,
                        [amno_type]: amno-1
                    })
                }
            //2 żetony=1 magazynek
            }else if(w_type=="Shotgun" || w_type=="Sniper_rifle" || w_type=="Fusion_rifle" || w_type=="Machine_rifle" || w_type=="Line_rifle" || w_type=="Granade_launcher"){
                var amno=parseInt(values[amno_type])                     //Ile żetonów pozostało
                var max=parseInt(values[mag_size])                   //Wielkość magazynka
                var camno=parseInt(values[curr_amno])    //Obecna amunicja
                //Zmień wartość amunicji
                if(amno>1 && camno!=max){
                    setAttrs({
                        [curr_amno]: max,
                        [amno_type]: amno-2
                    })
                }else if(amno==1 && camno!=max){
                    setAttrs({
                        [curr_amno]: Math.floor(max/2),
                        [amno_type]: amno-1
                    })
                }
            //1 żeton=1 pocisk //Wyrzutnia rakiet
            }else{
                var amno=parseInt(values[amno_type])                     //Ile żetonów pozostało
                var max=parseInt(values[mag_size])                   //Wielkość magazynka
                var camno=parseInt(values[curr_amno])    //Obecna amunicja
                //Zmień wartość amunicji
                if(amno>=max && camno!=max){
                    setAttrs({
                        [curr_amno]: max,
                        [amno_type]: amno-max
                    })
                }else if(amno>0 && camno!=max){
                    setAttrs({
                        [curr_amno]: amno,
                        [amno_type]: 0
                    })
                }
            }
        })
    }

    //Przyciski na karcie broni
    on('clicked:attack_kinetic', (info) => {
        bind_atack("kinetic_type","kinetic_param4","kinetic_weapon_name","kinetic_param1","kinetic_weapon_current_ammo")
    })

    on('clicked:attack_special', (info) => {
        bind_atack("special_type","special_param4","special_weapon_name","special_param1","special_weapon_current_ammo")
    })

    on('clicked:attack_heavy', (info) => {
        bind_atack("heavy_type","heavy_param4","heavy_weapon_name","heavy_param1","heavy_weapon_current_ammo")
    })

    on('clicked:attack_melee', (info) => {
        bind_melee()
    })

    //Obsługa przycisku przeładuj
    on('clicked:reload_kinetic', (info) => {
        bind_reload("kinetic_type","kinetic_weapon_current_ammo","kinetic_param5","kinetic_amno")
    })

    on('clicked:reload_special', (info) => {
        bind_reload("special_type","special_weapon_current_ammo","special_param5","special_amno")
    })

    on('clicked:reload_heavy', (info) => {
        bind_reload("heavy_type","heavy_weapon_current_ammo","heavy_param5","heavy_amno")
    })

    const quality=["common","uncommon","rare","legend","exotic"]
    const engrams=["engram1","engram2","engram3","engram4","engram5","engram6","engram7","engram8","engram9","engram10"]

    //Dodawanie engramów
    on('clicked:add_engram',(info)=>{
        var query="&{template:None} {{enquality=[[?{Jakość|Zwykły,0|Niezwykły,1|Rzadki,2|Legendarny,3|Egzotyczny,4}]] }}"
        startRoll(query, (results) => {
            var e_q = results.results.enquality.result    //Jakość engramu
            getAttrs(engrams,(values)=>{
                var i=0                                     //Indeks
                var len=engrams.length                      //Długość tablicy
                //Znajdź pierwsze puste pole
                for(i=0;i<len;i++){
                    if(values[engrams[i]]=="null"){
                        break
                    }
                }
                //Ustaw nowy engram
                if(i!=len){
                    setAttrs({
                        [engrams[i]]: quality[e_q]
                    })
                }
            })
        })
    })

    //Usuwanie engramów
    on('clicked:delete_engram',(info)=>{
        getAttrs(engrams,(values)=>{
            var i=0                                         //Indeks
            var len=engrams.length                          //Długość tablicy
            //Znajdź pierwsze puste pole
            for(i=0;i<len;i++){
                if(values[engrams[i]]=="null"){
                    break
                }
            }
            //Skasuj engram
            if(i!=0){
                setAttrs({
                    [engrams[i-1]]: "null"
                })
            }
        })
    })

    const gun_parameters=["weapon_quality","weapon_name","type","param1","param2","param3","param4","param5","param6","param7","weapon_current_ammo","weapon_energy","weapons_mod_name_1","weapons_mod_desc_1","weapons_mod_name_2","weapons_mod_desc_2"]
    const armor_parameters=["armor_quality","armor_name","armor_mobility","armor_defence","armor_regeneration","armor_discipline","armor_inteligence","armor_strong","armor_value","armor_class","armor_mod_name_1","armor_mod_desc_1","armor_mod_name_2","armor_mod_desc_2"]
    const spaceship_parameters=["spaceship_quality","spaceship_name","spaceship_acceleration","spaceship_max_speed","spaceship_tough","spaceship_weapon_damage","spaceship_weapon_armor_penetration","spaceship_mod1","spaceship_mod2","spaceship_eq"]
    const sparrow_parameters=["sparrow_quality","sparrow_name","sparrow_acceleration","sparrow_max_speed","sparrow_tough","sparrow_nitro","sparrow_nitro_reg","sparrow_mod1","sparrow_mod2","sparrow_mod3","sparrow_eq"]

    //Przeekwipowanie karty
    on("clicked:repeating_card:changeeq",(info)=>{
        getAttrs(["repeating_card_card_type","repeating_card_weapon_amno","repeating_card_armor_location"],(values)=>{
            var cardType=values.repeating_card_card_type            //Typ przedmiotu
            var gunAmno=values.repeating_card_weapon_amno           //Typ amunicji broni
            var armorType=values.repeating_card_armor_location      //Typ części opancerzenia
            if(cardType=="gun" && gunAmno!="-"){
                gunAmno=gunAmno.slice(0,gunAmno.indexOf("_")+1)     //Usunięcie "amno"
                gun_parameters.forEach(param => {
                    let equiped_param=gunAmno+param                 //Nazwa parametru broni zaekwipowanej
                    let unequiped_param="repeating_card_"+param     //Nazwa parametru broni niezaekwipowanej
                    getAttrs([equiped_param,unequiped_param],(values)=>{
                        let tmp_equiped=values[equiped_param]       //Wartość parametru broni zaekwipowanej
                        let tmp_unequiped=values[unequiped_param]   //Wartość parametru broni niezaekwipowanej
                        //Zamiana miejscami
                        setAttrs({
                            [equiped_param]: tmp_unequiped,
                            [unequiped_param]: tmp_equiped
                        })
                    })
                })
            }else if(cardType=="armor" && armorType!=""){
                armor_parameters.forEach(param => {
                    let equiped_param=armorType+"_"+param               //Nazwa parametru broni zaekwipowanej
                    let unequiped_param="repeating_card_"+param         //Nazwa parametru broni niezaekwipowanej
                    getAttrs([equiped_param,unequiped_param],(values)=>{
                        let tmp_equiped=values[equiped_param]           //Wartość parametru broni zaekwipowanej
                        let tmp_unequiped=values[unequiped_param]       //Wartość parametru broni niezaekwipowanej
                        //Zamiana miejscami
                        setAttrs({
                            [equiped_param]: tmp_unequiped,
                            [unequiped_param]: tmp_equiped
                        })
                    })
                })
            }else if(cardType=="spaceship"){
                spaceship_parameters.forEach(param => {
                    let equiped_param=param                             //Nazwa parametru statku zaekwipowanej
                    let unequiped_param="repeating_card_"+param         //Nazwa parametru statku niezaekwipowanej
                    getAttrs([equiped_param,unequiped_param],(values)=>{
                        let tmp_equiped=values[equiped_param]           //Wartość parametru statku zaekwipowanej
                        let tmp_unequiped=values[unequiped_param]       //Wartość parametru statku niezaekwipowanej
                        //Zamiana miejscami
                        setAttrs({
                            [equiped_param]: tmp_unequiped,
                            [unequiped_param]: tmp_equiped
                        })
                    })
                })
            }else if(cardType=="sparrow"){
                sparrow_parameters.forEach(param => {
                    let equiped_param=param                             //Nazwa parametru wróbla zaekwipowanej
                    let unequiped_param="repeating_card_"+param         //Nazwa parametru wróbla niezaekwipowanej
                    getAttrs([equiped_param,unequiped_param],(values)=>{
                        let tmp_equiped=values[equiped_param]           //Wartość parametru wróbla zaekwipowanej
                        let tmp_unequiped=values[unequiped_param]       //Wartość parametru wróbla niezaekwipowanej
                        //Zamiana miejscami
                        setAttrs({
                            [equiped_param]: tmp_unequiped,
                            [unequiped_param]: tmp_equiped
                        })
                    })
                })
            }
        })
    })

</script>